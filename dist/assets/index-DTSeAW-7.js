const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jspdf.es.min-CsJKOWOL.js","assets/supabase-DxtlfJa1.js","assets/vendor-VDje9Jtb.js","assets/ui-DzPnSBVO.js","assets/ResumeDocument-DyhLTEWc.js","assets/index-Gp6FNohe.js"])))=>i.map(i=>d[i]);
import{r as u,a as Aa,b as Oa,R as Fa}from"./vendor-VDje9Jtb.js";import{c as Ma,_ as le}from"./supabase-DxtlfJa1.js";import{c as Ke,X as ie,I as Zt,A as Ua,a as ae,C as de,R as ea,F as ta,b as pe,S as za,L as Ra,d as Ia,E as pt,e as ye,U as La,f as qa,B as $a,g as Pe,h as qe,D as vt,i as Tt,Z as Wa,j as Ya,k as Ba,P as mt,l as aa,T as sa,m as Ha,n as Ga,o as Va,p as yt,M as Ka,q as Xa,r as Ja,s as na,t as _e,u as Le,v as Qa,w as At,x as Za,y as es}from"./ui-DzPnSBVO.js";function ts(s,t){for(var a=0;a<t.length;a++){const n=t[a];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in s)){const r=Object.getOwnPropertyDescriptor(n,i);r&&Object.defineProperty(s,i,r.get?r:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function a(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=a(i);fetch(i.href,r)}})();var ia={exports:{}},Xe={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var as=u,ss=Symbol.for("react.element"),ns=Symbol.for("react.fragment"),is=Object.prototype.hasOwnProperty,rs=as.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,os={key:!0,ref:!0,__self:!0,__source:!0};function ra(s,t,a){var n,i={},r=null,o=null;a!==void 0&&(r=""+a),t.key!==void 0&&(r=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)is.call(t,n)&&!os.hasOwnProperty(n)&&(i[n]=t[n]);if(s&&s.defaultProps)for(n in t=s.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:ss,type:s,key:r,ref:o,props:i,_owner:rs.current}}Xe.Fragment=ns;Xe.jsx=ra;Xe.jsxs=ra;ia.exports=Xe;var e=ia.exports,$e={},oa,bt,Ot=Aa;bt=$e.createRoot=Ot.createRoot,oa=$e.hydrateRoot=Ot.hydrateRoot;const ls=ts({__proto__:null,get createRoot(){return bt},default:$e,get hydrateRoot(){return oa}},[$e]),ve="https://qcaibguxsmwzihehhhar.supabase.co",la="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFjYWliZ3V4c213emloZWhoaGFyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAxODEzNTksImV4cCI6MjA2NTc1NzM1OX0.xnzUul9yhfXxV4dICYdwy5TpbE2OIgj8NB0AUnw3gO4",cs=ve.includes("your-project-id"),ds=la.includes("your_supabase_anon_key");if(cs||ds){const s=`
🔧 Supabase Configuration Required

To use this application, you need to set up Supabase:

1. Create a Supabase project at https://supabase.com
2. Go to Project Settings > API
3. Copy your Project URL and Public anon key
4. Update your .env file with:
   VITE_SUPABASE_URL=your_actual_project_url
   VITE_SUPABASE_ANON_KEY=your_actual_anon_key
5. Restart the development server

Current values:
- VITE_SUPABASE_URL: ${ve}
- VITE_SUPABASE_ANON_KEY: [PRESENT BUT INVALID]
  `;throw console.error(s),new Error("Supabase configuration required. Please check the console for setup instructions.")}try{new URL(ve)}catch{throw console.error("Invalid Supabase URL format:",ve),new Error(`Invalid Supabase URL format: ${ve}. Please ensure it starts with https:// and is a valid URL.`)}const k=Ma(ve,la),ca=u.createContext(void 0),Ce=()=>{const s=u.useContext(ca);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s},ps=({children:s})=>{const[t,a]=u.useState(null),[n,i]=u.useState(null),[r,o]=u.useState(null),[l,d]=u.useState(!0);u.useEffect(()=>{let f=!0;(async()=>{try{const{data:{session:y}}=await k.auth.getSession();y||(localStorage.removeItem("supabase.auth.token"),await k.auth.signOut())}catch(y){console.warn("Error clearing stale tokens:",y),localStorage.removeItem("supabase.auth.token"),await k.auth.signOut()}})(),(async()=>{try{const{data:{session:y},error:S}=await k.auth.getSession();S?(console.warn("Session error:",S),await k.auth.signOut(),f&&(o(null),a(null),i(null),d(!1))):f&&(o(y),a((y==null?void 0:y.user)??null),y!=null&&y.user?await c(y.user.id):d(!1))}catch(y){console.error("Error getting initial session:",y),f&&(o(null),a(null),i(null),d(!1))}})();const{data:{subscription:D}}=k.auth.onAuthStateChange(async(y,S)=>{var R;console.log("Auth state changed:",y,(R=S==null?void 0:S.user)==null?void 0:R.email),f&&(o(S),a((S==null?void 0:S.user)??null),S!=null&&S.user?await c(S.user.id):(i(null),d(!1)))});return()=>{f=!1,D.unsubscribe()}},[]);const c=async f=>{try{const{data:g,error:P}=await k.from("profiles").select("*").eq("id",f).maybeSingle();if(P){console.error("Error fetching profile:",P),i(null),d(!1);return}if(!g){console.warn("No profile found for user:",f),i(null),d(!1);return}const{data:D,error:y}=await k.from("subscriptions").select(`
          *,
          package:packages(*)
        `).eq("user_id",f).eq("status","active").maybeSingle();y&&console.warn("Error fetching subscription:",y);const S={...g,subscription:D||void 0};i(S)}catch(g){console.error("Error fetching profile:",g),i(null)}finally{d(!1)}},v={user:t,profile:n,session:r,isLoading:l,login:async(f,g)=>{var P,D;d(!0);try{const{data:y,error:S}=await k.auth.signInWithPassword({email:f,password:g});if(S)throw S}catch(y){throw console.error("Login error:",y),d(!1),(P=y.message)!=null&&P.includes("Invalid login credentials")?new Error("Invalid email or password"):(D=y.message)!=null&&D.includes("Failed to fetch")||y.name==="TypeError"?new Error("Unable to connect to the database. Please check your internet connection."):new Error(y.message||"Login failed")}},register:async f=>{var g;d(!0);try{const{error:P}=await k.auth.signUp({email:f.email,password:f.password,options:{data:{first_name:f.firstName,last_name:f.lastName}}});if(P)throw P.message.includes("User already registered")||P.message.includes("user_already_exists")?new Error("This email is already registered. Please sign in instead."):P}catch(P){throw console.error("Registration error:",P),d(!1),(g=P.message)!=null&&g.includes("Failed to fetch")||P.name==="TypeError"?new Error("Unable to connect to the database. Please check your internet connection."):P}},logout:async()=>{try{a(null),i(null),o(null);const{error:f}=await k.auth.signOut();f&&console.warn("Logout error (continuing anyway):",f),localStorage.removeItem("supabase.auth.token")}catch(f){throw console.error("Logout error:",f),a(null),i(null),o(null),d(!1),localStorage.removeItem("supabase.auth.token"),new Error(f.message||"Logout failed")}},updateProfile:async f=>{if(!t)throw new Error("No user logged in");try{const{error:g}=await k.from("profiles").update(f).eq("id",t.id);if(g)throw g;await c(t.id)}catch(g){throw console.error("Profile update error:",g),new Error(g.message||"Profile update failed")}}};return e.jsx(ca.Provider,{value:v,children:s})},da=u.createContext(void 0),we=()=>{const s=u.useContext(da);if(!s)throw new Error("useToast must be used within a ToastProvider");return s},ms=({children:s})=>{const[t,a]=u.useState([]),n=u.useCallback(p=>{const x=Math.random().toString(36).substr(2,9),h={...p,id:x,duration:p.duration??5e3};a(v=>[...v,h]),h.duration>0&&setTimeout(()=>{d(x)},h.duration)},[]),i=u.useCallback((p,x)=>{n({type:"success",title:p,message:x})},[n]),r=u.useCallback((p,x)=>{n({type:"error",title:p,message:x,duration:7e3})},[n]),o=u.useCallback((p,x)=>{n({type:"warning",title:p,message:x})},[n]),l=u.useCallback((p,x)=>{n({type:"info",title:p,message:x})},[n]),d=u.useCallback(p=>{a(x=>x.filter(h=>h.id!==p))},[]),c=p=>{switch(p){case"success":return e.jsx(de,{className:"w-5 h-5 text-green-600"});case"error":return e.jsx(ae,{className:"w-5 h-5 text-red-600"});case"warning":return e.jsx(Ua,{className:"w-5 h-5 text-yellow-600"});case"info":return e.jsx(Zt,{className:"w-5 h-5 text-blue-600"})}},m=p=>{switch(p){case"success":return"bg-green-50 border-green-200";case"error":return"bg-red-50 border-red-200";case"warning":return"bg-yellow-50 border-yellow-200";case"info":return"bg-blue-50 border-blue-200"}};return e.jsxs(da.Provider,{value:{showToast:n,showSuccess:i,showError:r,showWarning:o,showInfo:l,dismissToast:d},children:[s,e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2 max-w-sm",children:t.map(p=>e.jsx("div",{className:Ke("p-4 rounded-lg border shadow-lg transition-all duration-300 transform",m(p.type),"animate-in slide-in-from-right-full"),children:e.jsxs("div",{className:"flex items-start space-x-3",children:[c(p.type),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:p.title}),p.message&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:p.message}),p.action&&e.jsx("button",{onClick:p.action.onClick,className:"text-sm font-medium text-blue-600 hover:text-blue-700 mt-2",children:p.action.label})]}),e.jsx("button",{onClick:()=>d(p.id),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(ie,{className:"w-4 h-4"})})]})},p.id))})]})},M=({variant:s="primary",size:t="md",children:a,isLoading:n=!1,className:i,disabled:r,...o})=>{const l="inline-flex items-center justify-center font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",d={primary:"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500",secondary:"bg-gray-600 hover:bg-gray-700 text-white focus:ring-gray-500",outline:"border-2 border-blue-600 text-blue-600 hover:bg-blue-50 focus:ring-blue-500",ghost:"text-gray-600 hover:bg-gray-100 focus:ring-gray-500",danger:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500"},c={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"};return e.jsxs("button",{className:Ke(l,d[s],c[t],i),disabled:r||n,...o,children:[n&&e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),a]})},$=({children:s,className:t,padding:a="md",hover:n=!1})=>{const i={none:"",sm:"p-4",md:"p-6",lg:"p-8"};return e.jsx("div",{className:Ke("bg-white rounded-xl border border-gray-200 shadow-sm",n&&"hover:shadow-md transition-shadow duration-200",i[a],t),children:s})};class us extends u.Component{constructor(){super(...arguments),this.state={hasError:!1},this.handleRetry=()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})},this.handleReload=()=>{window.location.reload()}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,a){console.error("ErrorBoundary caught an error:",t,a),this.setState({error:t,errorInfo:a})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsx($,{className:"w-full max-w-md text-center",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(ae,{className:"w-12 h-12 text-red-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"We encountered an unexpected error. Please try again or refresh the page."}),!1]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(M,{onClick:this.handleRetry,variant:"outline",className:"flex-1",children:"Try Again"}),e.jsxs(M,{onClick:this.handleReload,className:"flex-1",children:[e.jsx(ea,{className:"w-4 h-4 mr-2"}),"Reload Page"]})]})]})})}):this.props.children}}const J=({label:s,error:t,helpText:a,className:n,id:i,...r})=>{const o=i||`input-${Math.random().toString(36).substr(2,9)}`;return e.jsxs("div",{className:"space-y-1",children:[s&&e.jsx("label",{htmlFor:o,className:"block text-sm font-medium text-gray-700",children:s}),e.jsx("input",{id:o,className:Ke("block w-full px-3 py-2 border rounded-lg shadow-sm transition-colors duration-200","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",t?"border-red-300 focus:ring-red-500":"border-gray-300 hover:border-gray-400",n),...r}),t&&e.jsx("p",{className:"text-sm text-red-600",children:t}),a&&!t&&e.jsx("p",{className:"text-sm text-gray-500",children:a})]})},xs=({onUpgradeClick:s})=>{var F,O,C,E,T,U;const{user:t,profile:a,logout:n,updateProfile:i}=Ce(),[r,o]=u.useState(!1),[l,d]=u.useState(!1),[c,m]=u.useState(!1),[p,x]=u.useState({first_name:(a==null?void 0:a.first_name)||"",last_name:(a==null?void 0:a.last_name)||""}),[h,v]=u.useState(""),[f,g]=u.useState(!1),P=u.useRef(null),D=!!t&&!!a,y=!!(a!=null&&a.subscription);u.useEffect(()=>{const L=I=>{P.current&&!P.current.contains(I.target)&&o(!1)};return document.addEventListener("mousedown",L),()=>{document.removeEventListener("mousedown",L)}},[]),u.useEffect(()=>{a&&x({first_name:a.first_name||"",last_name:a.last_name||""})},[a]);const S=async()=>{try{o(!1),await n()}catch(L){console.error("Logout error:",L),window.location.reload()}},R=async L=>{L.preventDefault(),m(!0),v(""),g(!1);try{await i(p),g(!0),setTimeout(()=>{d(!1),g(!1)},1500)}catch(I){console.error("Profile update error:",I),v(I.message||"Failed to update profile")}finally{m(!1)}},N=()=>{o(!1),d(!0),v(""),g(!1)};return e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-50",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"p-2 bg-blue-600 rounded-lg",children:e.jsx(ta,{className:"w-6 h-6 text-white"})}),e.jsx("span",{className:"text-xl font-bold text-gray-900",children:"ResumeAI"})]}),e.jsxs("nav",{className:"hidden md:flex items-center space-x-8",children:[e.jsx("a",{href:"#",className:"text-gray-600 hover:text-gray-900 transition-colors",children:"Dashboard"}),e.jsx("a",{href:"#",className:"text-gray-600 hover:text-gray-900 transition-colors",children:"Templates"}),e.jsx("a",{href:"#",className:"text-gray-600 hover:text-gray-900 transition-colors",children:"History"}),(a==null?void 0:a.is_admin)&&e.jsx("a",{href:"#",className:"text-gray-600 hover:text-gray-900 transition-colors",children:"Admin"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:D?e.jsxs("div",{className:"flex items-center space-x-3",children:[y?e.jsxs("span",{className:"px-3 py-1 bg-gradient-to-r from-yellow-400 to-orange-500 text-white text-sm font-medium rounded-full flex items-center space-x-1",children:[e.jsx(pe,{className:"w-4 h-4"}),e.jsx("span",{children:((O=(F=a.subscription)==null?void 0:F.package)==null?void 0:O.name)||"Premium"})]}):e.jsx(M,{variant:"outline",size:"sm",onClick:s,children:"Upgrade"}),e.jsxs("div",{className:"relative",ref:P,children:[e.jsxs("button",{className:"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100 transition-colors",onClick:()=>o(!r),children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center",children:e.jsxs("span",{className:"text-white font-medium text-sm",children:[(C=a==null?void 0:a.first_name)==null?void 0:C[0],(E=a==null?void 0:a.last_name)==null?void 0:E[0]]})}),e.jsx("span",{className:"hidden md:block text-sm font-medium text-gray-700",children:a==null?void 0:a.first_name})]}),r&&e.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:[e.jsxs("div",{className:"px-4 py-2 border-b border-gray-100",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[a==null?void 0:a.first_name," ",a==null?void 0:a.last_name]}),e.jsx("p",{className:"text-xs text-gray-500",children:t==null?void 0:t.email})]}),e.jsxs("button",{onClick:N,className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center space-x-2",children:[e.jsx(za,{className:"w-4 h-4"}),e.jsx("span",{children:"Profile Settings"})]}),e.jsxs("button",{onClick:S,className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center space-x-2",children:[e.jsx(Ra,{className:"w-4 h-4"}),e.jsx("span",{children:"Sign Out"})]})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(M,{variant:"ghost",children:"Sign In"}),e.jsx(M,{children:"Get Started"})]})})]})})}),l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs($,{className:"w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Profile Settings"}),e.jsx("button",{onClick:()=>d(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ie,{className:"w-5 h-5 text-gray-500"})})]}),f&&e.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsx("p",{className:"text-green-700 text-sm",children:"Profile updated successfully!"})}),h&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-red-700 text-sm",children:h})}),e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(J,{label:"First Name",value:p.first_name,onChange:L=>x(I=>({...I,first_name:L.target.value})),required:!0,placeholder:"John"}),e.jsx(J,{label:"Last Name",value:p.last_name,onChange:L=>x(I=>({...I,last_name:L.target.value})),required:!0,placeholder:"Doe"})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Email:"}),e.jsx("span",{className:"font-medium",children:t==null?void 0:t.email})]}),e.jsxs("div",{className:"flex justify-between text-sm mt-1",children:[e.jsx("span",{className:"text-gray-600",children:"Account Type:"}),e.jsx("span",{className:"font-medium",children:a!=null&&a.is_admin?"Administrator":"User"})]}),y&&e.jsxs("div",{className:"flex justify-between text-sm mt-1",children:[e.jsx("span",{className:"text-gray-600",children:"Subscription:"}),e.jsx("span",{className:"font-medium text-green-600",children:(U=(T=a.subscription)==null?void 0:T.package)==null?void 0:U.name})]})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsxs(M,{type:"submit",className:"flex-1 flex items-center justify-center space-x-2",isLoading:c,disabled:c,children:[e.jsx(Ia,{className:"w-4 h-4"}),e.jsx("span",{children:c?"Saving...":"Save Changes"})]}),e.jsx(M,{type:"button",variant:"outline",onClick:()=>d(!1),disabled:c,children:"Cancel"})]})]})]})})]})},Ee=()=>{const{showError:s}=we(),t=u.useCallback((n,i,r={})=>{const{showToast:o=!0,logError:l=!0,fallbackMessage:d="An unexpected error occurred"}=r;l&&console.error(`Error${i?` in ${i}`:""}:`,n);let c=d,m="Error";return n instanceof Error?(c=n.message,n.message.includes("network")||n.message.includes("fetch")?(m="Network Error",c="Unable to connect to the server. Please check your internet connection and try again."):n.message.includes("authentication")||n.message.includes("unauthorized")?(m="Authentication Error",c="Your session has expired. Please sign in again."):n.message.includes("permission")||n.message.includes("forbidden")?(m="Permission Error",c="You do not have permission to perform this action."):n.message.includes("validation")?m="Validation Error":n.message.includes("timeout")&&(m="Timeout Error",c="The request took too long to complete. Please try again.")):typeof n=="string"&&(c=n),o&&s(m,c),{title:m,message:c,originalError:n}},[s]),a=u.useCallback(async(n,i,r)=>{try{return await n()}catch(o){return t(o,i,r),null}},[t]);return{handleError:t,handleAsyncError:a}},fs=({onToggleForm:s})=>{const[t,a]=u.useState(""),[n,i]=u.useState(""),[r,o]=u.useState(!1),[l,d]=u.useState(""),[c,m]=u.useState(!1),{login:p,isLoading:x}=Ce(),{handleError:h}=Ee(),{showSuccess:v}=we(),f=()=>t.trim()?t.includes("@")?n?!0:(d("Password is required"),!1):(d("Please enter a valid email address"),!1):(d("Email is required"),!1),g=async D=>{var y,S,R,N,F,O;if(D.preventDefault(),d(""),!!f()){m(!0);try{await p(t,n),v("Welcome back!","You have successfully signed in.")}catch(C){console.error("Login error:",C);let E="Login failed. Please try again.";(y=C.message)!=null&&y.includes("Invalid login credentials")?E="Invalid email or password. Please check your credentials and try again.":(S=C.message)!=null&&S.includes("Email not confirmed")?E="Please check your email and click the confirmation link before signing in.":(R=C.message)!=null&&R.includes("Too many requests")?E="Too many login attempts. Please wait a few minutes before trying again.":(N=C.message)!=null&&N.includes("Supabase configuration required")?E="Database connection not configured. Please check the console for setup instructions.":(F=C.message)!=null&&F.includes("Failed to fetch")||(O=C.message)!=null&&O.includes("fetch")?E="Unable to connect to the database. Please check your internet connection and try again.":C.message&&(E=C.message),d(E),h(C,"Login",{showToast:!1})}finally{m(!1)}}},P=()=>{d("")};return e.jsxs($,{className:"w-full max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Welcome Back"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Sign in to your account"})]}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[l&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(ae,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-red-700 text-sm",children:l}),l.includes("Database connection not configured")&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:"This appears to be a configuration issue. Please contact support if you continue to see this message."})]}),e.jsxs("button",{type:"button",onClick:P,className:"text-red-400 hover:text-red-600",children:[e.jsx("span",{className:"sr-only",children:"Dismiss"}),"×"]})]})}),e.jsx(J,{type:"email",label:"Email",value:t,onChange:D=>{a(D.target.value),l&&P()},required:!0,placeholder:"your@email.com",autoComplete:"email",disabled:c||x}),e.jsxs("div",{className:"relative",children:[e.jsx(J,{type:r?"text":"password",label:"Password",value:n,onChange:D=>{i(D.target.value),l&&P()},required:!0,placeholder:"Enter your password",autoComplete:"current-password",disabled:c||x}),e.jsx("button",{type:"button",onClick:()=>o(!r),className:"absolute right-3 top-8 text-gray-400 hover:text-gray-600",disabled:c||x,children:r?e.jsx(pt,{className:"w-4 h-4"}):e.jsx(ye,{className:"w-4 h-4"})})]}),e.jsx(M,{type:"submit",className:"w-full",isLoading:c||x,disabled:c||x,children:c||x?"Signing In...":"Sign In"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-gray-600",children:["Don't have an account?"," ",e.jsx("button",{onClick:s,className:"text-blue-600 hover:text-blue-700 font-medium transition-colors",disabled:c||x,children:"Sign up"})]})}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Demo accounts:"}),e.jsx("br",{}),"Free: demo@example.com",e.jsx("br",{}),"Premium: premium@example.com",e.jsx("br",{}),"Admin: admin@example.com",e.jsx("br",{}),"Password: any"]})})]})},hs=({onToggleForm:s})=>{const[t,a]=u.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),[n,i]=u.useState(!1),[r,o]=u.useState(!1),[l,d]=u.useState(""),[c,m]=u.useState(!1),[p,x]=u.useState({score:0,feedback:[]}),{register:h,isLoading:v}=Ce(),{handleError:f}=Ee(),{showSuccess:g}=we(),P=O=>{const C=[];let E=0;return O.length>=8?E+=1:C.push("At least 8 characters"),/[a-z]/.test(O)?E+=1:C.push("One lowercase letter"),/[A-Z]/.test(O)?E+=1:C.push("One uppercase letter"),/[0-9]/.test(O)?E+=1:C.push("One number"),/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>?/`~]/.test(O)?E+=1:C.push("One special character"),{score:E,feedback:C}},D=()=>t.firstName.trim()?t.lastName.trim()?t.email.trim()?t.email.includes("@")?t.password?p.score<4?(d("Password does not meet security requirements"),!1):t.password!==t.confirmPassword?(d("Passwords do not match"),!1):!0:(d("Password is required"),!1):(d("Please enter a valid email address"),!1):(d("Email is required"),!1):(d("Last name is required"),!1):(d("First name is required"),!1),y=O=>{const{name:C,value:E}=O.target;a(T=>({...T,[C]:E})),C==="password"&&x(P(E)),l&&d("")},S=async O=>{var C,E,T,U,L,I,B,b;if(O.preventDefault(),d(""),!!D()){m(!0);try{await h(t),g("Account created successfully!","Welcome to ResumeAI. You can now start analyzing your resume.")}catch(w){console.error("Registration error:",w);let _="Registration failed. Please try again.";(C=w.message)!=null&&C.includes("User already registered")||(E=w.message)!=null&&E.includes("user_already_exists")||w.code==="user_already_exists"?_="This email is already registered. Please sign in instead.":(T=w.message)!=null&&T.includes("Invalid email")?_="Please enter a valid email address.":(U=w.message)!=null&&U.includes("weak_password")||w.code==="weak_password"?_="Password does not meet security requirements. Please ensure it contains uppercase, lowercase, numbers, and special characters.":(L=w.message)!=null&&L.includes("Database error saving new user")?_="Registration failed due to a server error. Please try again or contact support if the problem persists.":(I=w.message)!=null&&I.includes("Password")?_="Password requirements not met. Please choose a stronger password.":(B=w.message)!=null&&B.includes("Failed to fetch")||(b=w.message)!=null&&b.includes("fetch")?_="Unable to connect to the database. Please check your internet connection and try again.":w.message&&(_=w.message),d(_),f(w,"Registration",{showToast:!1})}finally{m(!1)}}},R=()=>{d("")},N=()=>p.score<=2?"bg-red-500":p.score===3?"bg-yellow-500":p.score===4?"bg-green-500":"bg-green-600",F=()=>p.score<=2?"Weak":p.score===3?"Good":p.score===4?"Strong":"Very Strong";return e.jsxs($,{className:"w-full max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Create Account"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Join ResumeAI today"})]}),e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[l&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(ae,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-red-700 text-sm",children:l}),l.includes("already registered")&&e.jsx("button",{type:"button",onClick:s,className:"text-blue-600 hover:text-blue-700 font-medium underline text-sm mt-1",children:"Sign in here"})]}),e.jsxs("button",{type:"button",onClick:R,className:"text-red-400 hover:text-red-600",children:[e.jsx("span",{className:"sr-only",children:"Dismiss"}),"×"]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(J,{name:"firstName",label:"First Name",value:t.firstName,onChange:y,required:!0,placeholder:"John",autoComplete:"given-name",disabled:c||v}),e.jsx(J,{name:"lastName",label:"Last Name",value:t.lastName,onChange:y,required:!0,placeholder:"Doe",autoComplete:"family-name",disabled:c||v})]}),e.jsx(J,{type:"email",name:"email",label:"Email",value:t.email,onChange:y,required:!0,placeholder:"your@email.com",autoComplete:"email",disabled:c||v}),e.jsxs("div",{className:"relative",children:[e.jsx(J,{type:n?"text":"password",name:"password",label:"Password",value:t.password,onChange:y,required:!0,placeholder:"Create a strong password",autoComplete:"new-password",disabled:c||v}),e.jsx("button",{type:"button",onClick:()=>i(!n),className:"absolute right-3 top-8 text-gray-400 hover:text-gray-600",disabled:c||v,children:n?e.jsx(pt,{className:"w-4 h-4"}):e.jsx(ye,{className:"w-4 h-4"})})]}),t.password&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Password strength:"}),e.jsx("span",{className:`text-sm font-medium ${p.score<=2?"text-red-600":p.score===3?"text-yellow-600":"text-green-600"}`,children:F()})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${N()}`,style:{width:`${p.score/5*100}%`}})}),p.feedback.length>0&&e.jsxs("div",{className:"text-xs text-gray-600",children:["Missing: ",p.feedback.join(", ")]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(J,{type:r?"text":"password",name:"confirmPassword",label:"Confirm Password",value:t.confirmPassword,onChange:y,required:!0,placeholder:"Repeat your password",autoComplete:"new-password",disabled:c||v}),e.jsx("button",{type:"button",onClick:()=>o(!r),className:"absolute right-3 top-8 text-gray-400 hover:text-gray-600",disabled:c||v,children:r?e.jsx(pt,{className:"w-4 h-4"}):e.jsx(ye,{className:"w-4 h-4"})}),t.confirmPassword&&t.password&&e.jsx("div",{className:"absolute right-10 top-8",children:t.password===t.confirmPassword?e.jsx(de,{className:"w-4 h-4 text-green-500"}):e.jsx(ae,{className:"w-4 h-4 text-red-500"})})]}),e.jsx(M,{type:"submit",className:"w-full",isLoading:c||v,disabled:c||v||p.score<4,children:c||v?"Creating Account...":"Create Account"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-gray-600",children:["Already have an account?"," ",e.jsx("button",{onClick:s,className:"text-blue-600 hover:text-blue-700 font-medium transition-colors",disabled:c||v,children:"Sign in"})]})})]})};var pa={exports:{}},gs="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",vs=gs,ys=vs;function ma(){}function ua(){}ua.resetWarningCache=ma;var bs=function(){function s(n,i,r,o,l,d){if(d!==ys){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}s.isRequired=s;function t(){return s}var a={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:t,element:s,elementType:s,instanceOf:t,node:s,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:ua,resetWarningCache:ma};return a.PropTypes=a,a};pa.exports=bs();var ws=pa.exports;const W=Oa(ws);function me(s,t,a,n){function i(r){return r instanceof a?r:new a(function(o){o(r)})}return new(a||(a=Promise))(function(r,o){function l(m){try{c(n.next(m))}catch(p){o(p)}}function d(m){try{c(n.throw(m))}catch(p){o(p)}}function c(m){m.done?r(m.value):i(m.value).then(l,d)}c((n=n.apply(s,t||[])).next())})}const js=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function be(s,t,a){const n=Ns(s),{webkitRelativePath:i}=s,r=typeof t=="string"?t:typeof i=="string"&&i.length>0?i:`./${s.name}`;return typeof n.path!="string"&&Ft(n,"path",r),Ft(n,"relativePath",r),n}function Ns(s){const{name:t}=s;if(t&&t.lastIndexOf(".")!==-1&&!s.type){const n=t.split(".").pop().toLowerCase(),i=js.get(n);i&&Object.defineProperty(s,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return s}function Ft(s,t,a){Object.defineProperty(s,t,{value:a,writable:!1,configurable:!1,enumerable:!0})}const ks=[".DS_Store","Thumbs.db"];function Ss(s){return me(this,void 0,void 0,function*(){return We(s)&&_s(s.dataTransfer)?Es(s.dataTransfer,s.type):Ps(s)?Ds(s):Array.isArray(s)&&s.every(t=>"getFile"in t&&typeof t.getFile=="function")?Cs(s):[]})}function _s(s){return We(s)}function Ps(s){return We(s)&&We(s.target)}function We(s){return typeof s=="object"&&s!==null}function Ds(s){return ut(s.target.files).map(t=>be(t))}function Cs(s){return me(this,void 0,void 0,function*(){return(yield Promise.all(s.map(a=>a.getFile()))).map(a=>be(a))})}function Es(s,t){return me(this,void 0,void 0,function*(){if(s.items){const a=ut(s.items).filter(i=>i.kind==="file");if(t!=="drop")return a;const n=yield Promise.all(a.map(Ts));return Mt(xa(n))}return Mt(ut(s.files).map(a=>be(a)))})}function Mt(s){return s.filter(t=>ks.indexOf(t.name)===-1)}function ut(s){if(s===null)return[];const t=[];for(let a=0;a<s.length;a++){const n=s[a];t.push(n)}return t}function Ts(s){if(typeof s.webkitGetAsEntry!="function")return Ut(s);const t=s.webkitGetAsEntry();return t&&t.isDirectory?fa(t):Ut(s,t)}function xa(s){return s.reduce((t,a)=>[...t,...Array.isArray(a)?xa(a):[a]],[])}function Ut(s,t){return me(this,void 0,void 0,function*(){var a;if(globalThis.isSecureContext&&typeof s.getAsFileSystemHandle=="function"){const r=yield s.getAsFileSystemHandle();if(r===null)throw new Error(`${s} is not a File`);if(r!==void 0){const o=yield r.getFile();return o.handle=r,be(o)}}const n=s.getAsFile();if(!n)throw new Error(`${s} is not a File`);return be(n,(a=t==null?void 0:t.fullPath)!==null&&a!==void 0?a:void 0)})}function As(s){return me(this,void 0,void 0,function*(){return s.isDirectory?fa(s):Os(s)})}function fa(s){const t=s.createReader();return new Promise((a,n)=>{const i=[];function r(){t.readEntries(o=>me(this,void 0,void 0,function*(){if(o.length){const l=Promise.all(o.map(As));i.push(l),r()}else try{const l=yield Promise.all(i);a(l)}catch(l){n(l)}}),o=>{n(o)})}r()})}function Os(s){return me(this,void 0,void 0,function*(){return new Promise((t,a)=>{s.file(n=>{const i=be(n,s.fullPath);t(i)},n=>{a(n)})})})}var rt=function(s,t){if(s&&t){var a=Array.isArray(t)?t:t.split(",");if(a.length===0)return!0;var n=s.name||"",i=(s.type||"").toLowerCase(),r=i.replace(/\/.*$/,"");return a.some(function(o){var l=o.trim().toLowerCase();return l.charAt(0)==="."?n.toLowerCase().endsWith(l):l.endsWith("/*")?r===l.replace(/\/.*$/,""):i===l})}return!0};function zt(s){return Us(s)||Ms(s)||ga(s)||Fs()}function Fs(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ms(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function Us(s){if(Array.isArray(s))return xt(s)}function Rt(s,t){var a=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable})),a.push.apply(a,n)}return a}function It(s){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Rt(Object(a),!0).forEach(function(n){ha(s,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(a)):Rt(Object(a)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(a,n))})}return s}function ha(s,t,a){return t in s?Object.defineProperty(s,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):s[t]=a,s}function De(s,t){return Is(s)||Rs(s,t)||ga(s,t)||zs()}function zs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ga(s,t){if(s){if(typeof s=="string")return xt(s,t);var a=Object.prototype.toString.call(s).slice(8,-1);if(a==="Object"&&s.constructor&&(a=s.constructor.name),a==="Map"||a==="Set")return Array.from(s);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return xt(s,t)}}function xt(s,t){(t==null||t>s.length)&&(t=s.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=s[a];return n}function Rs(s,t){var a=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(a!=null){var n=[],i=!0,r=!1,o,l;try{for(a=a.call(s);!(i=(o=a.next()).done)&&(n.push(o.value),!(t&&n.length===t));i=!0);}catch(d){r=!0,l=d}finally{try{!i&&a.return!=null&&a.return()}finally{if(r)throw l}}return n}}function Is(s){if(Array.isArray(s))return s}var Ls=typeof rt=="function"?rt:rt.default,qs="file-invalid-type",$s="file-too-large",Ws="file-too-small",Ys="too-many-files",Bs=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",a=t.split(","),n=a.length>1?"one of ".concat(a.join(", ")):a[0];return{code:qs,message:"File type must be ".concat(n)}},Lt=function(t){return{code:$s,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},qt=function(t){return{code:Ws,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},Hs={code:Ys,message:"Too many files"};function va(s,t){var a=s.type==="application/x-moz-file"||Ls(s,t);return[a,a?null:Bs(t)]}function ya(s,t,a){if(ce(s.size))if(ce(t)&&ce(a)){if(s.size>a)return[!1,Lt(a)];if(s.size<t)return[!1,qt(t)]}else{if(ce(t)&&s.size<t)return[!1,qt(t)];if(ce(a)&&s.size>a)return[!1,Lt(a)]}return[!0,null]}function ce(s){return s!=null}function Gs(s){var t=s.files,a=s.accept,n=s.minSize,i=s.maxSize,r=s.multiple,o=s.maxFiles,l=s.validator;return!r&&t.length>1||r&&o>=1&&t.length>o?!1:t.every(function(d){var c=va(d,a),m=De(c,1),p=m[0],x=ya(d,n,i),h=De(x,1),v=h[0],f=l?l(d):null;return p&&v&&!f})}function Ye(s){return typeof s.isPropagationStopped=="function"?s.isPropagationStopped():typeof s.cancelBubble<"u"?s.cancelBubble:!1}function ze(s){return s.dataTransfer?Array.prototype.some.call(s.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!s.target&&!!s.target.files}function $t(s){s.preventDefault()}function Vs(s){return s.indexOf("MSIE")!==-1||s.indexOf("Trident/")!==-1}function Ks(s){return s.indexOf("Edge/")!==-1}function Xs(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return Vs(s)||Ks(s)}function te(){for(var s=arguments.length,t=new Array(s),a=0;a<s;a++)t[a]=arguments[a];return function(n){for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return t.some(function(l){return!Ye(n)&&l&&l.apply(void 0,[n].concat(r)),Ye(n)})}}function Js(){return"showOpenFilePicker"in window}function Qs(s){if(ce(s)){var t=Object.entries(s).filter(function(a){var n=De(a,2),i=n[0],r=n[1],o=!0;return ba(i)||(console.warn('Skipped "'.concat(i,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(r)||!r.every(wa))&&(console.warn('Skipped "'.concat(i,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(a,n){var i=De(n,2),r=i[0],o=i[1];return It(It({},a),{},ha({},r,o))},{});return[{description:"Files",accept:t}]}return s}function Zs(s){if(ce(s))return Object.entries(s).reduce(function(t,a){var n=De(a,2),i=n[0],r=n[1];return[].concat(zt(t),[i],zt(r))},[]).filter(function(t){return ba(t)||wa(t)}).join(",")}function en(s){return s instanceof DOMException&&(s.name==="AbortError"||s.code===s.ABORT_ERR)}function tn(s){return s instanceof DOMException&&(s.name==="SecurityError"||s.code===s.SECURITY_ERR)}function ba(s){return s==="audio/*"||s==="video/*"||s==="image/*"||s==="text/*"||s==="application/*"||/\w+\/[-+.\w]+/g.test(s)}function wa(s){return/^.*\.[\w]+$/.test(s)}var an=["children"],sn=["open"],nn=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],rn=["refKey","onChange","onClick"];function on(s){return dn(s)||cn(s)||ja(s)||ln()}function ln(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cn(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function dn(s){if(Array.isArray(s))return ft(s)}function ot(s,t){return un(s)||mn(s,t)||ja(s,t)||pn()}function pn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ja(s,t){if(s){if(typeof s=="string")return ft(s,t);var a=Object.prototype.toString.call(s).slice(8,-1);if(a==="Object"&&s.constructor&&(a=s.constructor.name),a==="Map"||a==="Set")return Array.from(s);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return ft(s,t)}}function ft(s,t){(t==null||t>s.length)&&(t=s.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=s[a];return n}function mn(s,t){var a=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(a!=null){var n=[],i=!0,r=!1,o,l;try{for(a=a.call(s);!(i=(o=a.next()).done)&&(n.push(o.value),!(t&&n.length===t));i=!0);}catch(d){r=!0,l=d}finally{try{!i&&a.return!=null&&a.return()}finally{if(r)throw l}}return n}}function un(s){if(Array.isArray(s))return s}function Wt(s,t){var a=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable})),a.push.apply(a,n)}return a}function Y(s){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Wt(Object(a),!0).forEach(function(n){ht(s,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(a)):Wt(Object(a)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(a,n))})}return s}function ht(s,t,a){return t in s?Object.defineProperty(s,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):s[t]=a,s}function Be(s,t){if(s==null)return{};var a=xn(s,t),n,i;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);for(i=0;i<r.length;i++)n=r[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(s,n)&&(a[n]=s[n])}return a}function xn(s,t){if(s==null)return{};var a={},n=Object.keys(s),i,r;for(r=0;r<n.length;r++)i=n[r],!(t.indexOf(i)>=0)&&(a[i]=s[i]);return a}var wt=u.forwardRef(function(s,t){var a=s.children,n=Be(s,an),i=ka(n),r=i.open,o=Be(i,sn);return u.useImperativeHandle(t,function(){return{open:r}},[r]),Fa.createElement(u.Fragment,null,a(Y(Y({},o),{},{open:r})))});wt.displayName="Dropzone";var Na={disabled:!1,getFilesFromEvent:Ss,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};wt.defaultProps=Na;wt.propTypes={children:W.func,accept:W.objectOf(W.arrayOf(W.string)),multiple:W.bool,preventDropOnDocument:W.bool,noClick:W.bool,noKeyboard:W.bool,noDrag:W.bool,noDragEventsBubbling:W.bool,minSize:W.number,maxSize:W.number,maxFiles:W.number,disabled:W.bool,getFilesFromEvent:W.func,onFileDialogCancel:W.func,onFileDialogOpen:W.func,useFsAccessApi:W.bool,autoFocus:W.bool,onDragEnter:W.func,onDragLeave:W.func,onDragOver:W.func,onDrop:W.func,onDropAccepted:W.func,onDropRejected:W.func,onError:W.func,validator:W.func};var gt={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function ka(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=Y(Y({},Na),s),a=t.accept,n=t.disabled,i=t.getFilesFromEvent,r=t.maxSize,o=t.minSize,l=t.multiple,d=t.maxFiles,c=t.onDragEnter,m=t.onDragLeave,p=t.onDragOver,x=t.onDrop,h=t.onDropAccepted,v=t.onDropRejected,f=t.onFileDialogCancel,g=t.onFileDialogOpen,P=t.useFsAccessApi,D=t.autoFocus,y=t.preventDropOnDocument,S=t.noClick,R=t.noKeyboard,N=t.noDrag,F=t.noDragEventsBubbling,O=t.onError,C=t.validator,E=u.useMemo(function(){return Zs(a)},[a]),T=u.useMemo(function(){return Qs(a)},[a]),U=u.useMemo(function(){return typeof g=="function"?g:Yt},[g]),L=u.useMemo(function(){return typeof f=="function"?f:Yt},[f]),I=u.useRef(null),B=u.useRef(null),b=u.useReducer(fn,gt),w=ot(b,2),_=w[0],z=w[1],ee=_.isFocused,je=_.isFileDialogActive,Te=u.useRef(typeof window<"u"&&window.isSecureContext&&P&&Js()),jt=function(){!Te.current&&je&&setTimeout(function(){if(B.current){var A=B.current.files;A.length||(z({type:"closeDialog"}),L())}},300)};u.useEffect(function(){return window.addEventListener("focus",jt,!1),function(){window.removeEventListener("focus",jt,!1)}},[B,je,L,Te]);var ue=u.useRef([]),Nt=function(A){I.current&&I.current.contains(A.target)||(A.preventDefault(),ue.current=[])};u.useEffect(function(){return y&&(document.addEventListener("dragover",$t,!1),document.addEventListener("drop",Nt,!1)),function(){y&&(document.removeEventListener("dragover",$t),document.removeEventListener("drop",Nt))}},[I,y]),u.useEffect(function(){return!n&&D&&I.current&&I.current.focus(),function(){}},[I,D,n]);var re=u.useCallback(function(j){O?O(j):console.error(j)},[O]),kt=u.useCallback(function(j){j.preventDefault(),j.persist(),Me(j),ue.current=[].concat(on(ue.current),[j.target]),ze(j)&&Promise.resolve(i(j)).then(function(A){if(!(Ye(j)&&!F)){var H=A.length,V=H>0&&Gs({files:A,accept:E,minSize:o,maxSize:r,multiple:l,maxFiles:d,validator:C}),Q=H>0&&!V;z({isDragAccept:V,isDragReject:Q,isDragActive:!0,type:"setDraggedFiles"}),c&&c(j)}}).catch(function(A){return re(A)})},[i,c,re,F,E,o,r,l,d,C]),St=u.useCallback(function(j){j.preventDefault(),j.persist(),Me(j);var A=ze(j);if(A&&j.dataTransfer)try{j.dataTransfer.dropEffect="copy"}catch{}return A&&p&&p(j),!1},[p,F]),_t=u.useCallback(function(j){j.preventDefault(),j.persist(),Me(j);var A=ue.current.filter(function(V){return I.current&&I.current.contains(V)}),H=A.indexOf(j.target);H!==-1&&A.splice(H,1),ue.current=A,!(A.length>0)&&(z({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),ze(j)&&m&&m(j))},[I,m,F]),Ae=u.useCallback(function(j,A){var H=[],V=[];j.forEach(function(Q){var Ne=va(Q,E),he=ot(Ne,2),Ze=he[0],et=he[1],tt=ya(Q,o,r),Ue=ot(tt,2),at=Ue[0],st=Ue[1],nt=C?C(Q):null;if(Ze&&at&&!nt)H.push(Q);else{var it=[et,st];nt&&(it=it.concat(nt)),V.push({file:Q,errors:it.filter(function(Ta){return Ta})})}}),(!l&&H.length>1||l&&d>=1&&H.length>d)&&(H.forEach(function(Q){V.push({file:Q,errors:[Hs]})}),H.splice(0)),z({acceptedFiles:H,fileRejections:V,isDragReject:V.length>0,type:"setFiles"}),x&&x(H,V,A),V.length>0&&v&&v(V,A),H.length>0&&h&&h(H,A)},[z,l,E,o,r,d,x,h,v,C]),Oe=u.useCallback(function(j){j.preventDefault(),j.persist(),Me(j),ue.current=[],ze(j)&&Promise.resolve(i(j)).then(function(A){Ye(j)&&!F||Ae(A,j)}).catch(function(A){return re(A)}),z({type:"reset"})},[i,Ae,re,F]),xe=u.useCallback(function(){if(Te.current){z({type:"openDialog"}),U();var j={multiple:l,types:T};window.showOpenFilePicker(j).then(function(A){return i(A)}).then(function(A){Ae(A,null),z({type:"closeDialog"})}).catch(function(A){en(A)?(L(A),z({type:"closeDialog"})):tn(A)?(Te.current=!1,B.current?(B.current.value=null,B.current.click()):re(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):re(A)});return}B.current&&(z({type:"openDialog"}),U(),B.current.value=null,B.current.click())},[z,U,L,P,Ae,re,T,l]),Pt=u.useCallback(function(j){!I.current||!I.current.isEqualNode(j.target)||(j.key===" "||j.key==="Enter"||j.keyCode===32||j.keyCode===13)&&(j.preventDefault(),xe())},[I,xe]),Dt=u.useCallback(function(){z({type:"focus"})},[]),Ct=u.useCallback(function(){z({type:"blur"})},[]),Et=u.useCallback(function(){S||(Xs()?setTimeout(xe,0):xe())},[S,xe]),fe=function(A){return n?null:A},Qe=function(A){return R?null:fe(A)},Fe=function(A){return N?null:fe(A)},Me=function(A){F&&A.stopPropagation()},Da=u.useMemo(function(){return function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},A=j.refKey,H=A===void 0?"ref":A,V=j.role,Q=j.onKeyDown,Ne=j.onFocus,he=j.onBlur,Ze=j.onClick,et=j.onDragEnter,tt=j.onDragOver,Ue=j.onDragLeave,at=j.onDrop,st=Be(j,nn);return Y(Y(ht({onKeyDown:Qe(te(Q,Pt)),onFocus:Qe(te(Ne,Dt)),onBlur:Qe(te(he,Ct)),onClick:fe(te(Ze,Et)),onDragEnter:Fe(te(et,kt)),onDragOver:Fe(te(tt,St)),onDragLeave:Fe(te(Ue,_t)),onDrop:Fe(te(at,Oe)),role:typeof V=="string"&&V!==""?V:"presentation"},H,I),!n&&!R?{tabIndex:0}:{}),st)}},[I,Pt,Dt,Ct,Et,kt,St,_t,Oe,R,N,n]),Ca=u.useCallback(function(j){j.stopPropagation()},[]),Ea=u.useMemo(function(){return function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},A=j.refKey,H=A===void 0?"ref":A,V=j.onChange,Q=j.onClick,Ne=Be(j,rn),he=ht({accept:E,multiple:l,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:fe(te(V,Oe)),onClick:fe(te(Q,Ca)),tabIndex:-1},H,B);return Y(Y({},he),Ne)}},[B,a,l,Oe,n]);return Y(Y({},_),{},{isFocused:ee&&!n,getRootProps:Da,getInputProps:Ea,rootRef:I,inputRef:B,open:fe(xe)})}function fn(s,t){switch(t.type){case"focus":return Y(Y({},s),{},{isFocused:!0});case"blur":return Y(Y({},s),{},{isFocused:!1});case"openDialog":return Y(Y({},gt),{},{isFileDialogActive:!0});case"closeDialog":return Y(Y({},s),{},{isFileDialogActive:!1});case"setDraggedFiles":return Y(Y({},s),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return Y(Y({},s),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections,isDragReject:t.isDragReject});case"reset":return Y({},gt);default:return s}}function Yt(){}const hn=s=>{const a=["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document"];if(s.size>10485760)return{isValid:!1,error:"File size must be less than 10MB"};if(!a.includes(s.type))return{isValid:!1,error:"Only PDF and DOCX files are allowed"};const n=s.name.toLowerCase();return n.includes("..")||n.includes("/")||n.includes("\\")?{isValid:!1,error:"Invalid file name"}:s.size<100?{isValid:!1,error:"File appears to be empty or corrupted"}:{isValid:!0}},gn=s=>{switch(s){case"application/pdf":return"📄";case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":return"📝";default:return"📄"}},Bt=s=>{if(s===0)return"0 Bytes";const t=1024,a=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(s)/Math.log(t));return parseFloat((s/Math.pow(t,n)).toFixed(2))+" "+a[n]},vn=async(s,t,a="modern",n="resume.pdf")=>{try{const[{default:i},{default:r},{createRoot:o}]=await Promise.all([le(()=>import("./jspdf.es.min-CsJKOWOL.js"),__vite__mapDeps([0,1,2,3])),le(()=>import("./html2canvas.esm-CBrSDip1.js"),[]),le(()=>Promise.resolve().then(()=>ls),void 0)]),{ResumeDocument:l}=await le(async()=>{const{ResumeDocument:m}=await import("./ResumeDocument-DyhLTEWc.js");return{ResumeDocument:m}},__vite__mapDeps([4,2,1,3])),d=await le(()=>import("./vendor-VDje9Jtb.js").then(m=>m.i),[]),c=document.createElement("div");c.style.position="absolute",c.style.left="-9999px",c.style.top="-9999px",c.style.width="8.5in",c.style.backgroundColor="#ffffff",document.body.appendChild(c);try{const m=o(c);await new Promise(g=>{m.render(d.createElement(l,{resumeText:s,templateData:t,templateCategory:a})),setTimeout(g,1e3)});const p=await r(c,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff",width:816,height:1056,scrollX:0,scrollY:0}),x=new i({orientation:"portrait",unit:"in",format:"letter"}),h=8.5,v=p.height*h/p.width,f=p.toDataURL("image/png",1);v>11?x.addImage(f,"PNG",.25,.25,h-.5,10.5):x.addImage(f,"PNG",.25,.25,h-.5,v),m.unmount(),document.body.removeChild(c),x.save(n)}catch(m){throw document.body.removeChild(c),m}}catch(i){throw console.error("PDF generation error:",i),new Error("Failed to generate PDF. Please try again.")}};class lt{static async processFile(t){const a=hn(t);if(!a.isValid)throw new Error(a.error);let n,i,r;try{if(t.type==="application/pdf"){const d=await this.extractTextFromPDF(t);n=d.text,r=d.pageCount,i="PDF.js"}else if(t.type==="application/vnd.openxmlformats-officedocument.wordprocessingml.document")n=await this.extractTextFromDOCX(t),i="Mammoth.js";else throw new Error("Unsupported file type");const o=this.cleanExtractedText(n);if(!o||o.trim().length<50)throw new Error("Insufficient text content extracted. Please ensure your resume contains readable text.");const l=this.countWords(o);return{text:o,metadata:{fileName:t.name,fileSize:t.size,fileType:t.type,pageCount:r,wordCount:l,extractionMethod:i}}}catch(o){throw console.error("File processing error:",o),new Error(`Failed to process file: ${o.message}`)}}static async extractTextFromPDF(t){var a,n,i,r,o;try{const l=await le(()=>import("./pdf-CLl1tYSi.js"),[]),d=`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${l.version}/pdf.worker.min.js`;l.GlobalWorkerOptions.workerSrc||(l.GlobalWorkerOptions.workerSrc=d);const c=await t.arrayBuffer(),p=await l.getDocument({data:c,verbosity:0,cMapUrl:"https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/cmaps/",cMapPacked:!0,standardFontDataUrl:"https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/standard_fonts/",useSystemFonts:!0,disableFontFace:!1,disableRange:!1,disableStream:!1,disableAutoFetch:!1,pdfBug:!1}).promise;let x="";const h=p.numPages;let v=0;for(let f=1;f<=h;f++)try{const D=(await(await p.getPage(f)).getTextContent({normalizeWhitespace:!0,disableCombineTextItems:!1})).items.filter(y=>y.str&&y.str.trim()).map(y=>y.str).join(" ");D.trim()&&(x+=D+`
`,v++)}catch(g){console.warn(`Error extracting text from page ${f}:`,g)}if(await p.destroy(),v===0)throw new Error("No readable text found in PDF. The document may contain only images or scanned content.");if(x.trim().length<50)throw new Error("Very little text extracted from PDF. The document may be primarily image-based or have formatting issues.");return{text:x.trim(),pageCount:h}}catch(l){throw console.error("PDF extraction error:",l),(a=l.message)!=null&&a.includes("Invalid PDF")?new Error("Invalid PDF file. Please ensure the file is not corrupted and is a valid PDF document."):(n=l.message)!=null&&n.includes("password")?new Error("Password-protected PDFs are not supported. Please upload an unprotected version."):(i=l.message)!=null&&i.includes("No readable text found")?new Error("This PDF appears to contain only images or scanned content. Please upload a PDF with selectable text or convert it using OCR software first."):(r=l.message)!=null&&r.includes("Very little text extracted")?new Error("Unable to extract sufficient text from this PDF. Please ensure it contains readable text content, not just images."):(o=l.message)!=null&&o.includes("Loading")?new Error("Failed to load PDF file. The file may be corrupted or too large."):l.name==="UnexpectedResponseException"?new Error("PDF processing failed due to network issues. Please try again."):new Error("Failed to extract text from PDF. The file may be corrupted, contain only images, or have an unsupported format. Please try uploading a different PDF or convert it to a text-based format.")}}static async extractTextFromDOCX(t){var a,n;try{const i=await le(()=>import("./index-Gp6FNohe.js").then(l=>l.i),__vite__mapDeps([5,2])),r=await t.arrayBuffer(),o=await i.extractRawText({arrayBuffer:r});if(o.messages&&o.messages.length>0&&console.warn("DOCX extraction warnings:",o.messages),!o.value||o.value.trim().length<50)throw new Error("Very little text extracted from DOCX. The document may be empty or contain primarily non-text content.");return o.value}catch(i){throw console.error("DOCX extraction error:",i),(a=i.message)!=null&&a.includes("not a valid zip file")?new Error("Invalid DOCX file. Please ensure the file is not corrupted and is a valid Word document."):(n=i.message)!=null&&n.includes("Very little text extracted")?new Error("Unable to extract sufficient text from this DOCX file. Please ensure it contains readable content."):new Error("Failed to extract text from DOCX file. The file may be corrupted or in an unsupported format.")}}static cleanExtractedText(t){return t.replace(/\s+/g," ").replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x9F]/g,"").replace(/\r\n/g,`
`).replace(/\r/g,`
`).replace(/\n{3,}/g,`

`).replace(/\f/g,`
`).replace(/\u00A0/g," ").trim()}static countWords(t){return t.split(/\s+/).filter(a=>a.length>0).length}static async validateResumeContent(t){const a=[];let n=!0;Object.entries({contact:/(?:email|phone|address|linkedin|github|contact)/i,experience:/(?:experience|work|employment|job|position|career)/i,education:/(?:education|degree|university|college|school|academic)/i,skills:/(?:skills|technologies|proficient|expertise|competencies)/i}).forEach(([o,l])=>{l.test(t)||a.push(`Consider adding a ${o} section to your resume`)});const r=this.countWords(t);return r<100?(n=!1,a.push("Resume appears too short. Consider adding more details about your experience and skills.")):r>1e3&&a.push("Resume is quite long. Consider condensing to 1-2 pages for better readability."),/\b\d{4}\b/.test(t)||a.push("Consider adding dates to your experience and education sections."),/(?:@|email)/i.test(t)||a.push("Make sure to include your email address for contact purposes."),(t.includes("�")||/[^\x00-\x7F]{10,}/.test(t))&&a.push("Some characters may not have been extracted correctly. Please review the content."),{isValid:n,suggestions:a}}static generatePreview(t,a=500){return t.length<=a?t:t.substring(0,a)+"..."}static detectLanguage(t){const a=["the","and","or","but","in","on","at","to","for","of","with","by"],n=t.toLowerCase().split(/\s+/);return n.filter(o=>a.includes(o)).length/Math.min(n.length,100)>.1?"en":"unknown"}static extractContactInfo(t){const a={},n=t.match(/\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b/);n&&(a.email=n[0]);const i=t.match(/(?:\+?1[-.\s]?)?\(?[0-9]{3}\)?[-.\s]?[0-9]{3}[-.\s]?[0-9]{4}/);i&&(a.phone=i[0]);const r=t.match(/(?:linkedin\.com\/in\/|linkedin\.com\/pub\/)[A-Za-z0-9-]+/i);r&&(a.linkedin=r[0]);const o=t.match(/(?:github\.com\/)[A-Za-z0-9-]+/i);return o&&(a.github=o[0]),a}}const yn=({onFileSelect:s,selectedFile:t,processingResult:a,onClearFile:n})=>{const[i,r]=u.useState(!1),[o,l]=u.useState(""),[d,c]=u.useState(!1),[m,p]=u.useState(""),{handleError:x}=Ee(),{showSuccess:h,showError:v}=we(),f=u.useCallback(async(R,N)=>{var F,O,C;if(N.length>0){const E=N[0];let T="File upload failed";if(E.errors){const U=E.errors[0];U.code==="file-too-large"?T="File is too large. Please select a file smaller than 10MB.":U.code==="file-invalid-type"?T="Invalid file type. Please select a PDF or DOCX file.":T=U.message}l(T),v("Upload Failed",T);return}if(R.length>0){const E=R[0];r(!0),l(""),p("Validating file...");try{p("Extracting text content...");const T=await lt.processFile(E);p("Validating resume content...");const U=await lt.validateResumeContent(T.text);if(!U.isValid){const L="Resume validation failed: "+U.suggestions.join(", ");l(L),v("Validation Failed",L),r(!1);return}p("Processing complete!"),s(E,T),h("File uploaded successfully!",`Extracted ${T.metadata.wordCount} words from your resume.`)}catch(T){console.error("File processing error:",T);let U="Failed to process file";(F=T.message)!=null&&F.includes("PDF")?U="Unable to extract text from PDF. Please ensure it contains selectable text, not just images.":(O=T.message)!=null&&O.includes("DOCX")?U="Unable to process DOCX file. Please ensure it's a valid Word document.":(C=T.message)!=null&&C.includes("Insufficient text")?U="The file doesn't contain enough readable text. Please upload a complete resume.":T.message&&(U=T.message),l(U),x(T,"File Upload",{showToast:!0,fallbackMessage:U})}finally{r(!1),p("")}}},[s,x,h,v]),{getRootProps:g,getInputProps:P,isDragActive:D,isDragReject:y}=ka({onDrop:f,accept:{"application/pdf":[".pdf"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"]},maxFiles:1,maxSize:10*1024*1024,multiple:!1,disabled:i}),S=()=>{l("")};return t&&a?e.jsxs("div",{className:"space-y-4",children:[e.jsxs($,{className:"border-green-200 bg-green-50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(de,{className:"w-8 h-8 text-green-500"}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-lg",children:gn(t.type)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:t.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[Bt(t.size)," • ",a.metadata.wordCount," words",a.metadata.pageCount&&` • ${a.metadata.pageCount} pages`]})]})]})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>c(!d),children:e.jsx(ye,{className:"w-4 h-4"})}),e.jsx(M,{variant:"ghost",size:"sm",onClick:n,children:e.jsx(ie,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-green-200",children:e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsx("span",{children:"✅ Text extracted successfully"}),e.jsx("span",{children:"✅ Content validated"}),e.jsx("span",{children:"✅ Ready for analysis"})]})}),d&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-green-200",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Content Preview:"}),e.jsx("div",{className:"bg-white p-3 rounded border max-h-40 overflow-y-auto",children:e.jsx("pre",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:lt.generatePreview(a.text,300)})})]})]}),e.jsx($,{className:"bg-blue-50 border-blue-200",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Zt,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Processing Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700",children:"Extraction Method:"}),e.jsx("span",{className:"ml-2 text-blue-900",children:a.metadata.extractionMethod})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700",children:"Word Count:"}),e.jsx("span",{className:"ml-2 text-blue-900",children:a.metadata.wordCount})]}),a.metadata.pageCount&&e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700",children:"Pages:"}),e.jsx("span",{className:"ml-2 text-blue-900",children:a.metadata.pageCount})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700",children:"File Size:"}),e.jsx("span",{className:"ml-2 text-blue-900",children:Bt(a.metadata.fileSize)})]})]})]})]})})]}):e.jsxs($,{className:"text-center",padding:"lg",children:[o&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(ae,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"text-sm text-red-700",children:o}),o.includes("PDF")&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Tip: Try converting your PDF to a Word document if it contains scanned images."})]}),e.jsx("button",{type:"button",onClick:S,className:"text-red-400 hover:text-red-600",children:e.jsx(ie,{className:"w-4 h-4"})})]})}),e.jsxs("div",{...g(),className:`
          border-2 border-dashed rounded-xl p-8 cursor-pointer transition-all duration-200
          ${D&&!y?"border-blue-500 bg-blue-50":y?"border-red-500 bg-red-50":"border-gray-300 hover:border-gray-400 hover:bg-gray-50"}
          ${i?"pointer-events-none opacity-75":""}
        `,children:[e.jsx("input",{...P()}),e.jsxs("div",{className:"space-y-4",children:[i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin mx-auto w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-medium text-gray-900",children:"Processing your resume..."}),e.jsx("p",{className:"text-gray-500 mt-1",children:m||"Extracting text and validating content"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(La,{className:`mx-auto w-12 h-12 ${D&&!y?"text-blue-500":y?"text-red-500":"text-gray-400"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-medium text-gray-900",children:y?"Invalid file type":D?"Drop your resume here":"Upload your resume"}),e.jsx("p",{className:"text-gray-500 mt-1",children:y?"Please select a PDF or DOCX file":D?"Release to upload":"Drag & drop your resume here, or click to browse"})]})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-sm text-gray-500",children:[e.jsx(qa,{className:"w-4 h-4"}),e.jsx("span",{children:"Supports PDF and DOCX files up to 10MB"})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"What we'll do with your file:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-xs text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-green-500",children:"✓"}),e.jsx("span",{children:"Extract text content"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-green-500",children:"✓"}),e.jsx("span",{children:"Validate resume structure"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-green-500",children:"✓"}),e.jsx("span",{children:"Detect contact information"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-green-500",children:"✓"}),e.jsx("span",{children:"Prepare for AI analysis"})]})]})]})]})]})]})},bn=({value:s,onChange:t})=>e.jsxs($,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx($a,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Job Description"})]}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Paste the job description you're applying for. Our AI will analyze it to tailor your resume."})]}),e.jsx("textarea",{value:s,onChange:a=>t(a.target.value),placeholder:"Paste the complete job description here including requirements, responsibilities, and qualifications...",className:"w-full h-64 p-4 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200"})]}),wn=({templates:s,selectedTemplate:t,onTemplateSelect:a,hasActiveSubscription:n})=>e.jsxs($,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Choose Template"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Select an ATS-friendly template for your tailored resume"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(i=>{const r=t===i.id,o=!i.is_premium||n;return e.jsxs("div",{className:`
                relative border-2 rounded-lg overflow-hidden cursor-pointer transition-all duration-200
                ${r?"border-blue-500 ring-2 ring-blue-200":"border-gray-200 hover:border-gray-300"}
                ${!o&&"opacity-75"}
              `,onClick:()=>o&&a(i.id),children:[i.is_premium&&e.jsx("div",{className:"absolute top-2 right-2 z-10",children:e.jsxs("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-2 py-1 rounded-full text-xs font-medium flex items-center space-x-1",children:[e.jsx(pe,{className:"w-3 h-3"}),e.jsx("span",{children:"Premium"})]})}),r&&e.jsx("div",{className:"absolute top-2 left-2 z-10",children:e.jsx("div",{className:"bg-blue-500 text-white p-1 rounded-full",children:e.jsx(Pe,{className:"w-4 h-4"})})}),e.jsx("div",{className:"aspect-[3/4] bg-gradient-to-br from-gray-100 to-gray-200 relative",children:e.jsx("div",{className:"absolute inset-4 bg-white rounded shadow-sm p-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-2 bg-gray-300 rounded w-3/4"}),e.jsx("div",{className:"h-1 bg-gray-200 rounded w-1/2"}),e.jsxs("div",{className:"space-y-1 mt-3",children:[e.jsx("div",{className:"h-1 bg-gray-200 rounded"}),e.jsx("div",{className:"h-1 bg-gray-200 rounded w-5/6"}),e.jsx("div",{className:"h-1 bg-gray-200 rounded w-4/6"})]}),e.jsxs("div",{className:"mt-3 space-y-1",children:[e.jsx("div",{className:"h-1 bg-gray-300 rounded w-1/3"}),e.jsx("div",{className:"h-1 bg-gray-200 rounded"}),e.jsx("div",{className:"h-1 bg-gray-200 rounded w-3/4"})]})]})})}),e.jsxs("div",{className:"p-3 bg-white",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:i.name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:i.description}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:"inline-block px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-full capitalize",children:i.category})})]}),!o&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(pe,{className:"w-8 h-8 text-yellow-400 mx-auto mb-2"}),e.jsx("p",{className:"text-white text-sm font-medium",children:"Premium Required"})]})})]},i.id)})})]}),jn=({analysis:s,onDownload:t,onPreview:a})=>{const{handleError:n}=Ee(),{showSuccess:i}=we(),r=async o=>{try{i("Generating PDF...","Please wait while we create your professional resume."),await t(o),i("Download Complete!","Your resume has been downloaded successfully.")}catch(l){n(l,"PDF Download",{fallbackMessage:"Failed to download resume. Please try again."})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs($,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qe,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"ATS Score"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[s.ats_score,"%"]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Compatibility"})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-4",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 h-3 rounded-full transition-all duration-1000",style:{width:`${s.ats_score}%`}})}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Needs Work"}),e.jsx("span",{className:"text-gray-500",children:"Perfect Match"})]}),e.jsx("div",{className:"mt-4 p-3 rounded-lg bg-blue-50",children:e.jsx("p",{className:"text-sm text-blue-800",children:s.ats_score>=80?e.jsxs(e.Fragment,{children:[e.jsx(de,{className:"w-4 h-4 inline mr-1"}),"Excellent! Your resume is highly optimized for ATS systems."]}):s.ats_score>=60?e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"w-4 h-4 inline mr-1"}),"Good score! Consider implementing the suggestions below for further improvement."]}):e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"w-4 h-4 inline mr-1"}),"Your resume could benefit from optimization. Review the suggestions below."]})})})]}),e.jsxs($,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(de,{className:"w-5 h-5 text-green-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"AI Improvements"})]}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Key optimizations made to enhance your resume for this position"})]}),e.jsx("div",{className:"space-y-3",children:s.suggestions.map((o,l)=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-green-50 rounded-lg",children:[e.jsx(de,{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-gray-700",children:o})]},l))}),s.analysis_data&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.analysis_data.keywordsAdded&&s.analysis_data.keywordsAdded.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Keywords Added:"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:[s.analysis_data.keywordsAdded.slice(0,3).join(", "),s.analysis_data.keywordsAdded.length>3&&"..."]})]}),s.analysis_data.sectionsOptimized&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Sections Optimized:"}),e.jsx("p",{className:"text-gray-600 mt-1",children:s.analysis_data.sectionsOptimized.join(", ")})]})]})})]}),e.jsxs($,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Download Your Resume"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Your tailored resume is ready! Download as a professionally formatted PDF."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs(M,{onClick:a,variant:"outline",className:"flex-1 flex items-center justify-center space-x-2",children:[e.jsx(ye,{className:"w-4 h-4"}),e.jsx("span",{children:"Preview"})]}),e.jsxs(M,{onClick:()=>r("pdf"),className:"flex-1 flex items-center justify-center space-x-2",children:[e.jsx(vt,{className:"w-4 h-4"}),e.jsx("span",{children:"Download PDF"})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-xs text-blue-800",children:[e.jsx("strong",{children:"Professional Format:"})," Your resume will be downloaded as a beautifully formatted PDF that maintains consistent styling and is optimized for both ATS systems and human reviewers."]})})]})]})};class ct{static async analyzeResume(t){var a,n,i,r,o,l,d,c,m;try{const{data:{session:p},error:x}=await k.auth.getSession();if(x||!p)throw new Error("User not authenticated. Please sign in and try again.");try{const h=await fetch("https://qcaibguxsmwzihehhhar.supabase.co/functions/v1/analyze-resume",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p.access_token}`},body:JSON.stringify(t)});if(h.ok){const v=await h.json();if(v.success)return v.data;throw new Error(v.error||"Analysis failed")}else{if(h.status===401)throw new Error("Authentication expired. Please sign in again.");if(h.status===403)throw new Error("You do not have permission to perform this action.");if(h.status===429)throw new Error("Too many requests. Please wait a moment and try again.");return console.warn("Edge Function failed, using fallback analysis"),await this.generateFallbackAnalysis(t)}}catch(h){if((a=h.message)!=null&&a.includes("Authentication")||(n=h.message)!=null&&n.includes("permission")||(i=h.message)!=null&&i.includes("Too many requests"))throw h;return console.warn("Edge Function not available, using fallback analysis:",h.message),await this.generateFallbackAnalysis(t)}}catch(p){throw console.error("Error analyzing resume:",p),(r=p.message)!=null&&r.includes("User not authenticated")?new Error("Please sign in to analyze your resume"):(o=p.message)!=null&&o.includes("Authentication expired")?new Error("Your session has expired. Please sign in again."):(l=p.message)!=null&&l.includes("permission")?new Error("You do not have permission to perform this action."):(d=p.message)!=null&&d.includes("Too many requests")?new Error("You have reached the rate limit. Please wait a moment and try again."):(c=p.message)!=null&&c.includes("network")||(m=p.message)!=null&&m.includes("fetch")?new Error("Network error. Please check your internet connection and try again."):p}}static async generateFallbackAnalysis(t){await new Promise(m=>setTimeout(m,2500));const a=this.extractKeywords(t.jobDescription),n=this.extractKeywords(t.resumeText),i=a.filter(m=>!n.some(p=>p.toLowerCase().includes(m.toLowerCase()))).slice(0,5),r=["Optimized resume formatting for better ATS compatibility","Enhanced action verbs to demonstrate impact and achievements","Improved summary section to align with job requirements","Reorganized skills section to highlight relevant technologies",...i.length>0?[`Added relevant keywords: ${i.join(", ")}`]:[]],o=n.length/Math.max(a.length,1)*100,l=Math.min(o,85),d=Math.floor(l+Math.random()*15)+70,c=this.enhanceResumeText(t.resumeText,i);return{tailoredResume:c,suggestions:r,atsScore:Math.min(d,100),analysisData:{keywordsAdded:i,sectionsOptimized:["Summary","Experience","Skills"],improvementAreas:["Quantify achievements with specific numbers","Add relevant industry keywords","Improve formatting consistency"],originalWordCount:this.countWords(t.resumeText),enhancedWordCount:this.countWords(c),keywordMatchScore:Math.round(o)}}}static extractKeywords(t){const a=["JavaScript","TypeScript","React","Node.js","Python","Java","AWS","Docker","Kubernetes","Git","SQL","MongoDB","PostgreSQL","REST API","GraphQL","Agile","Scrum","CI/CD","DevOps","Machine Learning","Data Analysis","Project Management","Leadership","Communication","Problem Solving","Team Collaboration","Strategic Planning","Budget Management"],n=t.toLowerCase().split(/\W+/),i=a.filter(l=>n.some(d=>d.includes(l.toLowerCase())||l.toLowerCase().includes(d))),o=(t.match(/\b[A-Z][a-z]+(?:\s+[A-Z][a-z]+)*\b/g)||[]).filter(l=>l.length>2&&!["The","And","Or","But","In","On","At","To","For","Of","With","By"].includes(l));return[...new Set([...i,...o])]}static enhanceResumeText(t,a){let n=t;if(a.length>0){const i=/(?:SKILLS|TECHNICAL SKILLS|CORE COMPETENCIES)[\s\S]*?(?=\n[A-Z]{2,}|\n\n|$)/i,r=n.match(i);if(r){const l=r[0]+`
• `+a.join(", ");n=n.replace(i,l)}else{const o=`

TECHNICAL SKILLS
• ${a.join(", ")}`;n+=o}}return n+=`

[RESUME OPTIMIZED FOR ATS COMPATIBILITY]`,n}static countWords(t){return t.split(/\s+/).filter(a=>a.length>0).length}static async getUserAnalyses(t=10){try{const{data:{user:a}}=await k.auth.getUser();if(!a)throw new Error("User not authenticated");const{data:n,error:i}=await k.from("resume_analyses").select(`
          *,
          template:resume_templates(name, category)
        `).eq("user_id",a.id).order("created_at",{ascending:!1}).limit(t);if(i)throw i;return n}catch(a){throw console.error("Error fetching user analyses:",a),new Error("Failed to load analysis history. Please try again.")}}static async getTemplates(){try{const{data:t,error:a}=await k.from("resume_templates").select("*").eq("is_active",!0).order("created_at");if(a)throw a;return t}catch(t){throw console.error("Error fetching templates:",t),new Error("Failed to load resume templates. Please try again.")}}static async saveAnalysis(t){try{const{data:{user:a}}=await k.auth.getUser();if(!a)throw new Error("User not authenticated");const{data:n,error:i}=await k.from("resume_analyses").insert({user_id:a.id,original_resume_text:t.resumeText,job_description:t.jobDescription,tailored_resume_text:t.tailoredResume,template_id:t.templateId,suggestions:t.suggestions,ats_score:t.atsScore,analysis_data:t.analysisData}).select().single();if(i)throw i;return n}catch(a){throw console.error("Error saving analysis:",a),new Error("Failed to save analysis. Please try again.")}}}const Nn=()=>{var B,b;const{profile:s}=Ce(),[t,a]=u.useState(null),[n,i]=u.useState(null),[r,o]=u.useState(""),[l,d]=u.useState(""),[c,m]=u.useState([]),[p,x]=u.useState(null),[h,v]=u.useState(!1),[f,g]=u.useState(0),[P,D]=u.useState(""),[y,S]=u.useState(""),{handleError:R}=Ee(),{showSuccess:N,showError:F}=we(),O=!!(s!=null&&s.subscription);u.useEffect(()=>{C()},[]),u.useEffect(()=>{let w;if(h){g(0),D("Initializing analysis...");const _=[{progress:15,message:"Extracting resume content..."},{progress:30,message:"Analyzing job requirements..."},{progress:50,message:"Matching skills and keywords..."},{progress:70,message:"Optimizing content for ATS..."},{progress:85,message:"Generating suggestions..."},{progress:95,message:"Finalizing analysis..."}];let z=0;w=setInterval(()=>{g(ee=>{if(ee>=95)return ee;const je=ee+Math.random()*8+2;for(;z<_.length&&je>=_[z].progress;)D(_[z].message),z++;return Math.min(je,95)})},400)}return()=>{w&&clearInterval(w)}},[h]);const C=async()=>{try{const w=await ct.getTemplates();m(w);const _=w.find(z=>!z.is_premium||O);_&&d(_.id)}catch(w){R(w,"Template Loading")}},E=async(w,_)=>{a(w),i(_),S("")},T=async()=>{if(!(!n||!r.trim()||!l)){v(!0),S(""),g(0),D("Starting analysis...");try{const w=await ct.analyzeResume({resumeText:n.text,jobDescription:r,templateId:l});g(100),D("Analysis complete!");const _=c.find(ee=>ee.id===l),z={id:Date.now().toString(),user_id:s.id,original_resume_text:n.text,job_description:r,tailored_resume_text:w.tailoredResume,template_id:l,suggestions:w.suggestions,ats_score:w.atsScore,analysis_data:{...w.analysisData,fileMetadata:n.metadata,template:_},created_at:new Date().toISOString()};try{await ct.saveAnalysis({resumeText:n.text,jobDescription:r,templateId:l,tailoredResume:w.tailoredResume,suggestions:w.suggestions,atsScore:w.atsScore,analysisData:w.analysisData})}catch(ee){console.warn("Failed to save analysis to database:",ee)}x(z),N("Analysis Complete!","Your resume has been successfully optimized.")}catch(w){console.error("Analysis error:",w),S(w.message||"Analysis failed. Please try again."),g(0),D(""),R(w,"Resume Analysis")}finally{v(!1)}}},U=async w=>{if(p)try{const _=c.find(z=>z.id===p.template_id);await vn(p.tailored_resume_text||p.original_resume_text,(_==null?void 0:_.template_data)||{},(_==null?void 0:_.category)||"modern",`tailored-resume-${Date.now()}.pdf`)}catch(_){console.error("Download error:",_),R(_,"PDF Download",{fallbackMessage:"Failed to generate PDF. Please try again."})}},L=()=>{p&&N("Preview Feature","Preview functionality will open the formatted resume in a new window.")},I=n&&r.trim()&&l;return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Welcome back, ",s==null?void 0:s.first_name,"!"]}),e.jsx("p",{className:"text-gray-600",children:"Let's create your perfect, ATS-optimized resume tailored for your dream job."}),O&&e.jsx("div",{className:"mt-2",children:e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gradient-to-r from-yellow-400 to-orange-500 text-white",children:[e.jsx(pe,{className:"w-4 h-4 mr-1"}),(b=(B=s.subscription)==null?void 0:B.package)==null?void 0:b.name," Plan"]})})]}),y&&e.jsx($,{className:"mb-6 border-red-200 bg-red-50",children:e.jsxs("div",{className:"flex items-center space-x-2 text-red-700",children:[e.jsx(ae,{className:"w-5 h-5"}),e.jsx("p",{children:y})]})}),p?e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Analysis Complete!"}),e.jsx("p",{className:"text-gray-600",children:"Your resume has been optimized and tailored for the job description."})]}),e.jsx(jn,{analysis:p,onDownload:U,onPreview:L}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx(M,{variant:"outline",onClick:()=>{x(null),a(null),i(null),o(""),S(""),g(0),D("")},children:"Start New Analysis"})})]}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Step 1: Upload Resume"}),e.jsx(yn,{onFileSelect:E,selectedFile:t,processingResult:n,onClearFile:()=>{a(null),i(null)}})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Step 2: Job Description"}),e.jsx(bn,{value:r,onChange:o})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Step 3: Choose Template"}),e.jsx(wn,{templates:c,selectedTemplate:l,onTemplateSelect:d,hasActiveSubscription:O})]}),e.jsx($,{className:"text-center",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-3 bg-blue-50 rounded-full w-fit mx-auto",children:e.jsx(Tt,{className:"w-8 h-8 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Ready to Analyze?"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Our AI will analyze your resume and tailor it specifically for this job opening."}),n&&e.jsx("div",{className:"mb-4 p-3 bg-green-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-sm text-green-800",children:[e.jsx(de,{className:"w-4 h-4"}),e.jsxs("span",{children:["Resume processed: ",n.metadata.wordCount," words extracted"]})]})}),h&&e.jsxs("div",{className:"mb-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-blue-600",children:[e.jsx(Wa,{className:"w-5 h-5 animate-pulse"}),e.jsx("span",{className:"text-sm font-medium",children:"AI Analysis in Progress"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-3 rounded-full transition-all duration-500 relative overflow-hidden",style:{width:`${f}%`},children:e.jsx("div",{className:"absolute inset-0 bg-white opacity-25 animate-pulse"})})}),e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(Ya,{className:"w-4 h-4 text-gray-500"}),e.jsx("p",{className:"text-xs text-gray-600 font-medium",children:P})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[Math.round(f),"% complete • Estimated time: ",Math.max(1,Math.ceil((100-f)/20)),"s remaining"]})]}),e.jsx(M,{onClick:T,disabled:!I||h,isLoading:h,className:"w-full flex items-center justify-center space-x-2",size:"lg",children:h?e.jsx("span",{children:"Analyzing with AI..."}):e.jsxs(e.Fragment,{children:[e.jsx(Tt,{className:"w-5 h-5"}),e.jsx("span",{children:"Analyze & Tailor Resume"}),e.jsx(Ba,{className:"w-5 h-5"})]})})]})]})})]})]})]})};function He(s){"@babel/helpers - typeof";return He=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},He(s)}function se(s){if(s===null||s===!0||s===!1)return NaN;var t=Number(s);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function G(s,t){if(t.length<s)throw new TypeError(s+" argument"+(s>1?"s":"")+" required, but only "+t.length+" present")}function Z(s){G(1,arguments);var t=Object.prototype.toString.call(s);return s instanceof Date||He(s)==="object"&&t==="[object Date]"?new Date(s.getTime()):typeof s=="number"||t==="[object Number]"?new Date(s):((typeof s=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function kn(s,t){G(2,arguments);var a=Z(s),n=se(t);if(isNaN(n))return new Date(NaN);if(!n)return a;var i=a.getDate(),r=new Date(a.getTime());r.setMonth(a.getMonth()+n+1,0);var o=r.getDate();return i>=o?r:(a.setFullYear(r.getFullYear(),r.getMonth(),i),a)}function Sn(s,t){G(2,arguments);var a=Z(s).getTime(),n=se(t);return new Date(a+n)}var _n={};function Je(){return _n}function Pn(s){var t=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return t.setUTCFullYear(s.getFullYear()),s.getTime()-t.getTime()}function Dn(s){return G(1,arguments),s instanceof Date||He(s)==="object"&&Object.prototype.toString.call(s)==="[object Date]"}function Cn(s){if(G(1,arguments),!Dn(s)&&typeof s!="number")return!1;var t=Z(s);return!isNaN(Number(t))}function Re(s){G(1,arguments);var t=Z(s),a=t.getMonth();return t.setFullYear(t.getFullYear(),a+1,0),t.setHours(23,59,59,999),t}function Ie(s){G(1,arguments);var t=Z(s);return t.setDate(1),t.setHours(0,0,0,0),t}function En(s,t){G(2,arguments);var a=se(t);return Sn(s,-a)}var Tn=864e5;function An(s){G(1,arguments);var t=Z(s),a=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var n=t.getTime(),i=a-n;return Math.floor(i/Tn)+1}function Ge(s){G(1,arguments);var t=1,a=Z(s),n=a.getUTCDay(),i=(n<t?7:0)+n-t;return a.setUTCDate(a.getUTCDate()-i),a.setUTCHours(0,0,0,0),a}function Sa(s){G(1,arguments);var t=Z(s),a=t.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(a+1,0,4),n.setUTCHours(0,0,0,0);var i=Ge(n),r=new Date(0);r.setUTCFullYear(a,0,4),r.setUTCHours(0,0,0,0);var o=Ge(r);return t.getTime()>=i.getTime()?a+1:t.getTime()>=o.getTime()?a:a-1}function On(s){G(1,arguments);var t=Sa(s),a=new Date(0);a.setUTCFullYear(t,0,4),a.setUTCHours(0,0,0,0);var n=Ge(a);return n}var Fn=6048e5;function Mn(s){G(1,arguments);var t=Z(s),a=Ge(t).getTime()-On(t).getTime();return Math.round(a/Fn)+1}function Ve(s,t){var a,n,i,r,o,l,d,c;G(1,arguments);var m=Je(),p=se((a=(n=(i=(r=t==null?void 0:t.weekStartsOn)!==null&&r!==void 0?r:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&i!==void 0?i:m.weekStartsOn)!==null&&n!==void 0?n:(d=m.locale)===null||d===void 0||(c=d.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&a!==void 0?a:0);if(!(p>=0&&p<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var x=Z(s),h=x.getUTCDay(),v=(h<p?7:0)+h-p;return x.setUTCDate(x.getUTCDate()-v),x.setUTCHours(0,0,0,0),x}function _a(s,t){var a,n,i,r,o,l,d,c;G(1,arguments);var m=Z(s),p=m.getUTCFullYear(),x=Je(),h=se((a=(n=(i=(r=t==null?void 0:t.firstWeekContainsDate)!==null&&r!==void 0?r:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&i!==void 0?i:x.firstWeekContainsDate)!==null&&n!==void 0?n:(d=x.locale)===null||d===void 0||(c=d.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&a!==void 0?a:1);if(!(h>=1&&h<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var v=new Date(0);v.setUTCFullYear(p+1,0,h),v.setUTCHours(0,0,0,0);var f=Ve(v,t),g=new Date(0);g.setUTCFullYear(p,0,h),g.setUTCHours(0,0,0,0);var P=Ve(g,t);return m.getTime()>=f.getTime()?p+1:m.getTime()>=P.getTime()?p:p-1}function Un(s,t){var a,n,i,r,o,l,d,c;G(1,arguments);var m=Je(),p=se((a=(n=(i=(r=t==null?void 0:t.firstWeekContainsDate)!==null&&r!==void 0?r:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&i!==void 0?i:m.firstWeekContainsDate)!==null&&n!==void 0?n:(d=m.locale)===null||d===void 0||(c=d.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&a!==void 0?a:1),x=_a(s,t),h=new Date(0);h.setUTCFullYear(x,0,p),h.setUTCHours(0,0,0,0);var v=Ve(h,t);return v}var zn=6048e5;function Rn(s,t){G(1,arguments);var a=Z(s),n=Ve(a,t).getTime()-Un(a,t).getTime();return Math.round(n/zn)+1}function q(s,t){for(var a=s<0?"-":"",n=Math.abs(s).toString();n.length<t;)n="0"+n;return a+n}var ne={y:function(t,a){var n=t.getUTCFullYear(),i=n>0?n:1-n;return q(a==="yy"?i%100:i,a.length)},M:function(t,a){var n=t.getUTCMonth();return a==="M"?String(n+1):q(n+1,2)},d:function(t,a){return q(t.getUTCDate(),a.length)},a:function(t,a){var n=t.getUTCHours()/12>=1?"pm":"am";switch(a){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h:function(t,a){return q(t.getUTCHours()%12||12,a.length)},H:function(t,a){return q(t.getUTCHours(),a.length)},m:function(t,a){return q(t.getUTCMinutes(),a.length)},s:function(t,a){return q(t.getUTCSeconds(),a.length)},S:function(t,a){var n=a.length,i=t.getUTCMilliseconds(),r=Math.floor(i*Math.pow(10,n-3));return q(r,a.length)}},ge={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},In={G:function(t,a,n){var i=t.getUTCFullYear()>0?1:0;switch(a){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});case"GGGG":default:return n.era(i,{width:"wide"})}},y:function(t,a,n){if(a==="yo"){var i=t.getUTCFullYear(),r=i>0?i:1-i;return n.ordinalNumber(r,{unit:"year"})}return ne.y(t,a)},Y:function(t,a,n,i){var r=_a(t,i),o=r>0?r:1-r;if(a==="YY"){var l=o%100;return q(l,2)}return a==="Yo"?n.ordinalNumber(o,{unit:"year"}):q(o,a.length)},R:function(t,a){var n=Sa(t);return q(n,a.length)},u:function(t,a){var n=t.getUTCFullYear();return q(n,a.length)},Q:function(t,a,n){var i=Math.ceil((t.getUTCMonth()+1)/3);switch(a){case"Q":return String(i);case"QQ":return q(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,a,n){var i=Math.ceil((t.getUTCMonth()+1)/3);switch(a){case"q":return String(i);case"qq":return q(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,a,n){var i=t.getUTCMonth();switch(a){case"M":case"MM":return ne.M(t,a);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(t,a,n){var i=t.getUTCMonth();switch(a){case"L":return String(i+1);case"LL":return q(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(t,a,n,i){var r=Rn(t,i);return a==="wo"?n.ordinalNumber(r,{unit:"week"}):q(r,a.length)},I:function(t,a,n){var i=Mn(t);return a==="Io"?n.ordinalNumber(i,{unit:"week"}):q(i,a.length)},d:function(t,a,n){return a==="do"?n.ordinalNumber(t.getUTCDate(),{unit:"date"}):ne.d(t,a)},D:function(t,a,n){var i=An(t);return a==="Do"?n.ordinalNumber(i,{unit:"dayOfYear"}):q(i,a.length)},E:function(t,a,n){var i=t.getUTCDay();switch(a){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});case"EEEE":default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(t,a,n,i){var r=t.getUTCDay(),o=(r-i.weekStartsOn+8)%7||7;switch(a){case"e":return String(o);case"ee":return q(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});case"eeee":default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(t,a,n,i){var r=t.getUTCDay(),o=(r-i.weekStartsOn+8)%7||7;switch(a){case"c":return String(o);case"cc":return q(o,a.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});case"cccc":default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(t,a,n){var i=t.getUTCDay(),r=i===0?7:i;switch(a){case"i":return String(r);case"ii":return q(r,a.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});case"iiii":default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(t,a,n){var i=t.getUTCHours(),r=i/12>=1?"pm":"am";switch(a){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,a,n){var i=t.getUTCHours(),r;switch(i===12?r=ge.noon:i===0?r=ge.midnight:r=i/12>=1?"pm":"am",a){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(t,a,n){var i=t.getUTCHours(),r;switch(i>=17?r=ge.evening:i>=12?r=ge.afternoon:i>=4?r=ge.morning:r=ge.night,a){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(t,a,n){if(a==="ho"){var i=t.getUTCHours()%12;return i===0&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return ne.h(t,a)},H:function(t,a,n){return a==="Ho"?n.ordinalNumber(t.getUTCHours(),{unit:"hour"}):ne.H(t,a)},K:function(t,a,n){var i=t.getUTCHours()%12;return a==="Ko"?n.ordinalNumber(i,{unit:"hour"}):q(i,a.length)},k:function(t,a,n){var i=t.getUTCHours();return i===0&&(i=24),a==="ko"?n.ordinalNumber(i,{unit:"hour"}):q(i,a.length)},m:function(t,a,n){return a==="mo"?n.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):ne.m(t,a)},s:function(t,a,n){return a==="so"?n.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):ne.s(t,a)},S:function(t,a){return ne.S(t,a)},X:function(t,a,n,i){var r=i._originalDate||t,o=r.getTimezoneOffset();if(o===0)return"Z";switch(a){case"X":return Gt(o);case"XXXX":case"XX":return oe(o);case"XXXXX":case"XXX":default:return oe(o,":")}},x:function(t,a,n,i){var r=i._originalDate||t,o=r.getTimezoneOffset();switch(a){case"x":return Gt(o);case"xxxx":case"xx":return oe(o);case"xxxxx":case"xxx":default:return oe(o,":")}},O:function(t,a,n,i){var r=i._originalDate||t,o=r.getTimezoneOffset();switch(a){case"O":case"OO":case"OOO":return"GMT"+Ht(o,":");case"OOOO":default:return"GMT"+oe(o,":")}},z:function(t,a,n,i){var r=i._originalDate||t,o=r.getTimezoneOffset();switch(a){case"z":case"zz":case"zzz":return"GMT"+Ht(o,":");case"zzzz":default:return"GMT"+oe(o,":")}},t:function(t,a,n,i){var r=i._originalDate||t,o=Math.floor(r.getTime()/1e3);return q(o,a.length)},T:function(t,a,n,i){var r=i._originalDate||t,o=r.getTime();return q(o,a.length)}};function Ht(s,t){var a=s>0?"-":"+",n=Math.abs(s),i=Math.floor(n/60),r=n%60;if(r===0)return a+String(i);var o=t;return a+String(i)+o+q(r,2)}function Gt(s,t){if(s%60===0){var a=s>0?"-":"+";return a+q(Math.abs(s)/60,2)}return oe(s,t)}function oe(s,t){var a=t||"",n=s>0?"-":"+",i=Math.abs(s),r=q(Math.floor(i/60),2),o=q(i%60,2);return n+r+a+o}var Vt=function(t,a){switch(t){case"P":return a.date({width:"short"});case"PP":return a.date({width:"medium"});case"PPP":return a.date({width:"long"});case"PPPP":default:return a.date({width:"full"})}},Pa=function(t,a){switch(t){case"p":return a.time({width:"short"});case"pp":return a.time({width:"medium"});case"ppp":return a.time({width:"long"});case"pppp":default:return a.time({width:"full"})}},Ln=function(t,a){var n=t.match(/(P+)(p+)?/)||[],i=n[1],r=n[2];if(!r)return Vt(t,a);var o;switch(i){case"P":o=a.dateTime({width:"short"});break;case"PP":o=a.dateTime({width:"medium"});break;case"PPP":o=a.dateTime({width:"long"});break;case"PPPP":default:o=a.dateTime({width:"full"});break}return o.replace("{{date}}",Vt(i,a)).replace("{{time}}",Pa(r,a))},qn={p:Pa,P:Ln},$n=["D","DD"],Wn=["YY","YYYY"];function Yn(s){return $n.indexOf(s)!==-1}function Bn(s){return Wn.indexOf(s)!==-1}function Kt(s,t,a){if(s==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(a,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(s==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(a,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(s==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(a,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(s==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(a,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Hn={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Gn=function(t,a,n){var i,r=Hn[t];return typeof r=="string"?i=r:a===1?i=r.one:i=r.other.replace("{{count}}",a.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};function dt(s){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=t.width?String(t.width):s.defaultWidth,n=s.formats[a]||s.formats[s.defaultWidth];return n}}var Vn={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Kn={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Xn={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Jn={date:dt({formats:Vn,defaultWidth:"full"}),time:dt({formats:Kn,defaultWidth:"full"}),dateTime:dt({formats:Xn,defaultWidth:"full"})},Qn={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Zn=function(t,a,n,i){return Qn[t]};function ke(s){return function(t,a){var n=a!=null&&a.context?String(a.context):"standalone",i;if(n==="formatting"&&s.formattingValues){var r=s.defaultFormattingWidth||s.defaultWidth,o=a!=null&&a.width?String(a.width):r;i=s.formattingValues[o]||s.formattingValues[r]}else{var l=s.defaultWidth,d=a!=null&&a.width?String(a.width):s.defaultWidth;i=s.values[d]||s.values[l]}var c=s.argumentCallback?s.argumentCallback(t):t;return i[c]}}var ei={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ti={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ai={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},si={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ni={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ii={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ri=function(t,a){var n=Number(t),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},oi={ordinalNumber:ri,era:ke({values:ei,defaultWidth:"wide"}),quarter:ke({values:ti,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:ke({values:ai,defaultWidth:"wide"}),day:ke({values:si,defaultWidth:"wide"}),dayPeriod:ke({values:ni,defaultWidth:"wide",formattingValues:ii,defaultFormattingWidth:"wide"})};function Se(s){return function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=a.width,i=n&&s.matchPatterns[n]||s.matchPatterns[s.defaultMatchWidth],r=t.match(i);if(!r)return null;var o=r[0],l=n&&s.parsePatterns[n]||s.parsePatterns[s.defaultParseWidth],d=Array.isArray(l)?ci(l,function(p){return p.test(o)}):li(l,function(p){return p.test(o)}),c;c=s.valueCallback?s.valueCallback(d):d,c=a.valueCallback?a.valueCallback(c):c;var m=t.slice(o.length);return{value:c,rest:m}}}function li(s,t){for(var a in s)if(s.hasOwnProperty(a)&&t(s[a]))return a}function ci(s,t){for(var a=0;a<s.length;a++)if(t(s[a]))return a}function di(s){return function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.match(s.matchPattern);if(!n)return null;var i=n[0],r=t.match(s.parsePattern);if(!r)return null;var o=s.valueCallback?s.valueCallback(r[0]):r[0];o=a.valueCallback?a.valueCallback(o):o;var l=t.slice(i.length);return{value:o,rest:l}}}var pi=/^(\d+)(th|st|nd|rd)?/i,mi=/\d+/i,ui={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},xi={any:[/^b/i,/^(a|c)/i]},fi={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},hi={any:[/1/i,/2/i,/3/i,/4/i]},gi={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},vi={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},yi={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},bi={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},wi={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ji={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Ni={ordinalNumber:di({matchPattern:pi,parsePattern:mi,valueCallback:function(t){return parseInt(t,10)}}),era:Se({matchPatterns:ui,defaultMatchWidth:"wide",parsePatterns:xi,defaultParseWidth:"any"}),quarter:Se({matchPatterns:fi,defaultMatchWidth:"wide",parsePatterns:hi,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Se({matchPatterns:gi,defaultMatchWidth:"wide",parsePatterns:vi,defaultParseWidth:"any"}),day:Se({matchPatterns:yi,defaultMatchWidth:"wide",parsePatterns:bi,defaultParseWidth:"any"}),dayPeriod:Se({matchPatterns:wi,defaultMatchWidth:"any",parsePatterns:ji,defaultParseWidth:"any"})},ki={code:"en-US",formatDistance:Gn,formatLong:Jn,formatRelative:Zn,localize:oi,match:Ni,options:{weekStartsOn:0,firstWeekContainsDate:1}},Si=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,_i=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Pi=/^'([^]*?)'?$/,Di=/''/g,Ci=/[a-zA-Z]/;function K(s,t,a){var n,i,r,o,l,d,c,m,p,x,h,v,f,g;G(2,arguments);var P=String(t),D=Je(),y=(n=(i=void 0)!==null&&i!==void 0?i:D.locale)!==null&&n!==void 0?n:ki,S=se((r=(o=(l=(d=void 0)!==null&&d!==void 0?d:void 0)!==null&&l!==void 0?l:D.firstWeekContainsDate)!==null&&o!==void 0?o:(c=D.locale)===null||c===void 0||(m=c.options)===null||m===void 0?void 0:m.firstWeekContainsDate)!==null&&r!==void 0?r:1);if(!(S>=1&&S<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var R=se((p=(x=(h=(v=void 0)!==null&&v!==void 0?v:void 0)!==null&&h!==void 0?h:D.weekStartsOn)!==null&&x!==void 0?x:(f=D.locale)===null||f===void 0||(g=f.options)===null||g===void 0?void 0:g.weekStartsOn)!==null&&p!==void 0?p:0);if(!(R>=0&&R<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!y.localize)throw new RangeError("locale must contain localize property");if(!y.formatLong)throw new RangeError("locale must contain formatLong property");var N=Z(s);if(!Cn(N))throw new RangeError("Invalid time value");var F=Pn(N),O=En(N,F),C={firstWeekContainsDate:S,weekStartsOn:R,locale:y,_originalDate:N},E=P.match(_i).map(function(T){var U=T[0];if(U==="p"||U==="P"){var L=qn[U];return L(T,y.formatLong)}return T}).join("").match(Si).map(function(T){if(T==="''")return"'";var U=T[0];if(U==="'")return Ei(T);var L=In[U];if(L)return Bn(T)&&Kt(T,t,String(s)),Yn(T)&&Kt(T,t,String(s)),L(O,T,y.localize,C);if(U.match(Ci))throw new RangeError("Format string contains an unescaped latin alphabet character `"+U+"`");return T}).join("");return E}function Ei(s){var t=s.match(Pi);return t?t[1].replace(Di,"'"):s}function Xt(s,t){G(2,arguments);var a=se(t);return kn(s,-a)}class X{static async getDashboardStats(){const t=new Date,a=Xt(t,1),n=Ie(t),i=Re(t),r=Ie(a),o=Re(a);try{const[l,d,c,m,p,x,h,v]=await Promise.all([this.getUserCount(n,i),this.getActiveSubscriptionCount(),this.getMonthlyRevenue(n,i),this.getAnalysisCount(n,i),this.getUserCount(r,o),this.getActiveSubscriptionCount(o),this.getMonthlyRevenue(r,o),this.getAnalysisCount(r,o)]),f=this.calculateGrowth(l.total,p.total),g=this.calculateGrowth(d,x),P=this.calculateGrowth(c,h),D=this.calculateGrowth(m,v);return{totalUsers:l.total,activeSubscriptions:d,monthlyRevenue:c,totalAnalyses:m,userGrowth:f,subscriptionGrowth:g,revenueGrowth:P,analysisGrowth:D}}catch(l){throw console.error("Error fetching dashboard stats:",l),l}}static async getUsageStats(){const t=new Date,a=Ie(t),n=Re(t);try{const[i,r,o,l]=await Promise.all([this.getUsageData("resume_upload",a,n),this.getUsageData("analysis",a,n),this.getUsageData("template_usage",a,n),this.getUsageData("pdf_download",a,n)]);return{resumeUploads:i,aiAnalyses:r,templateUsage:o,pdfDownloads:l}}catch(i){throw console.error("Error fetching usage stats:",i),i}}static async getRevenueChart(t=6){const a=[];for(let n=t-1;n>=0;n--){const i=Xt(new Date,n),r=Ie(i),o=Re(i),[l,d]=await Promise.all([this.getMonthlyRevenue(r,o),this.getNewSubscriptions(r,o)]);a.push({month:K(i,"MMM yyyy"),revenue:l,subscriptions:d})}return a}static async getUserActivity(t=30){const a=[];for(let n=t-1;n>=0;n--){const i=new Date;i.setDate(i.getDate()-n);const r=new Date(i.setHours(0,0,0,0)),o=new Date(i.setHours(23,59,59,999)),[l,d,c]=await Promise.all([this.getDailyNewUsers(r,o),this.getDailyActiveUsers(r,o),this.getAnalysisCount(r,o)]);a.push({date:K(r,"MMM dd"),newUsers:l,activeUsers:d,analyses:c})}return a}static async getUsers(t=1,a=10,n={}){const i=(t-1)*a;try{let r=k.from("profiles").select(`
          *,
          subscriptions(
            *,
            package:packages(name, price)
          ),
          resume_analyses(count)
        `,{count:"exact"});if(n.searchTerm&&n.searchTerm.trim()){const v=n.searchTerm.trim();r=r.or(`first_name.ilike.%${v}%,last_name.ilike.%${v}%,email.ilike.%${v}%`)}n.userRole&&n.userRole!=="all"&&(n.userRole==="admin"?r=r.eq("is_admin",!0):r=r.eq("is_admin",!1)),n.dateRange&&(r=r.gte("created_at",n.dateRange.start).lte("created_at",n.dateRange.end));const o=n.sortBy||"created_at",l=n.sortOrder||"desc";o==="name"?r=r.order("first_name",{ascending:l==="asc"}):r=r.order(o,{ascending:l==="asc"});const{count:d}=await r,{data:c,error:m,count:p}=await r.range(i,i+a-1);if(m)throw m;const x=(c==null?void 0:c.map(v=>{var P,D,y,S;const f=(P=v.subscriptions)==null?void 0:P.find(R=>R.status==="active"),g=((D=v.resume_analyses)==null?void 0:D.length)||0;return{...v,subscription_status:f?"active":"inactive",subscription_package:((y=f==null?void 0:f.package)==null?void 0:y.name)||"Free",subscription_price:((S=f==null?void 0:f.package)==null?void 0:S.price)||0,total_analyses:g,last_login:v.updated_at}}))||[];let h=x;return n.subscriptionStatus&&n.subscriptionStatus!=="all"&&(h=x.filter(v=>{var f;switch(n.subscriptionStatus){case"active":return v.subscription_status==="active";case"inactive":return v.subscription_status==="inactive";case"cancelled":return(f=v.subscriptions)==null?void 0:f.some(g=>g.status==="cancelled");default:return!0}})),{users:h,total:p||0,pages:Math.ceil((p||0)/a),filteredCount:d||0}}catch(r){throw console.error("Error fetching users:",r),r}}static async searchUsers(t,a=20){try{const{data:n,error:i}=await k.from("profiles").select(`
          *,
          subscriptions(
            *,
            package:packages(name)
          )
        `).or(`first_name.ilike.%${t}%,last_name.ilike.%${t}%,email.ilike.%${t}%`).limit(a);if(i)throw i;return n||[]}catch(n){throw console.error("Error searching users:",n),n}}static async exportUsers(t={}){try{let a=k.from("profiles").select(`
          *,
          subscriptions(
            *,
            package:packages(name, price)
          ),
          resume_analyses(count)
        `);if(t.searchTerm&&t.searchTerm.trim()){const o=t.searchTerm.trim();a=a.or(`first_name.ilike.%${o}%,last_name.ilike.%${o}%,email.ilike.%${o}%`)}t.userRole&&t.userRole!=="all"&&(t.userRole==="admin"?a=a.eq("is_admin",!0):a=a.eq("is_admin",!1)),t.dateRange&&(a=a.gte("created_at",t.dateRange.start).lte("created_at",t.dateRange.end));const{data:n,error:i}=await a.order("created_at",{ascending:!1});if(i)throw i;const r=(n||[]).map(o=>{var c,m,p;const l=(c=o.subscriptions)==null?void 0:c.find(x=>x.status==="active"),d=((m=o.resume_analyses)==null?void 0:m.length)||0;return{id:o.id,first_name:o.first_name,last_name:o.last_name,email:o.email||"",is_admin:o.is_admin,subscription_status:l?"active":"inactive",subscription_package:((p=l==null?void 0:l.package)==null?void 0:p.name)||"Free",subscription_start_date:(l==null?void 0:l.start_date)||"",subscription_end_date:(l==null?void 0:l.end_date)||"",total_analyses:d,last_login:o.updated_at,created_at:o.created_at,updated_at:o.updated_at}});return t.subscriptionStatus&&t.subscriptionStatus!=="all"?r.filter(o=>{switch(t.subscriptionStatus){case"active":return o.subscription_status==="active";case"inactive":return o.subscription_status==="inactive";case"cancelled":return!1;default:return!0}}):r}catch(a){throw console.error("Error exporting users:",a),a}}static generateCSV(t){return t.length===0?"No data to export":[["User ID","First Name","Last Name","Email","Is Admin","Subscription Status","Subscription Package","Subscription Start Date","Subscription End Date","Total Analyses","Last Login","Created At","Updated At"].join(","),...t.map(i=>[i.id,`"${i.first_name}"`,`"${i.last_name}"`,`"${i.email}"`,i.is_admin?"Yes":"No",i.subscription_status,`"${i.subscription_package}"`,i.subscription_start_date?K(new Date(i.subscription_start_date),"yyyy-MM-dd"):"",i.subscription_end_date?K(new Date(i.subscription_end_date),"yyyy-MM-dd"):"",i.total_analyses,i.last_login?K(new Date(i.last_login),"yyyy-MM-dd HH:mm:ss"):"",K(new Date(i.created_at),"yyyy-MM-dd HH:mm:ss"),K(new Date(i.updated_at),"yyyy-MM-dd HH:mm:ss")].join(","))].join(`
`)}static async getUserDetails(t){try{const{data:a,error:n}=await k.from("profiles").select(`
          *,
          subscriptions(
            *,
            package:packages(*)
          ),
          resume_analyses(
            id,
            ats_score,
            created_at,
            resume_templates(name)
          ),
          payment_transactions(
            id,
            amount,
            status,
            created_at
          )
        `).eq("id",t).single();if(n)throw n;return a}catch(a){throw console.error("Error fetching user details:",a),a}}static async updateUserStatus(t,a){try{const{error:n}=await k.from("profiles").update({is_admin:a}).eq("id",t);if(n)throw n}catch(n){throw console.error("Error updating user status:",n),n}}static async deleteUser(t){try{const{error:a}=await k.from("profiles").delete().eq("id",t);if(a)throw a}catch(a){throw console.error("Error deleting user:",a),a}}static async getUserCount(t,a){const{count:n}=await k.from("profiles").select("*",{count:"exact",head:!0}),{count:i}=await k.from("profiles").select("*",{count:"exact",head:!0}).gte("created_at",t.toISOString()).lte("created_at",a.toISOString());return{total:n||0,new:i||0}}static async getActiveSubscriptionCount(t){let a=k.from("subscriptions").select("*",{count:"exact",head:!0}).eq("status","active");t&&(a=a.lte("created_at",t.toISOString()));const{count:n}=await a;return n||0}static async getMonthlyRevenue(t,a){const{data:n}=await k.from("payment_transactions").select("amount").eq("status","completed").gte("created_at",t.toISOString()).lte("created_at",a.toISOString());return(n==null?void 0:n.reduce((i,r)=>i+Number(r.amount),0))||0}static async getAnalysisCount(t,a){const{count:n}=await k.from("resume_analyses").select("*",{count:"exact",head:!0}).gte("created_at",t.toISOString()).lte("created_at",a.toISOString());return n||0}static async getUsageData(t,a,n){const i=K(a,"yyyy-MM"),{data:r}=await k.from("usage_tracking").select("count").eq("action_type",t).eq("month_year",i),o=(r==null?void 0:r.reduce((m,p)=>m+p.count,0))||0,{data:l}=await k.from("usage_tracking").select("count").eq("action_type",t),d=(l==null?void 0:l.reduce((m,p)=>m+p.count,0))||0,c=d>0?Math.round(o/d*100):0;return{current:o,total:d,percentage:c}}static async getNewSubscriptions(t,a){const{count:n}=await k.from("subscriptions").select("*",{count:"exact",head:!0}).gte("created_at",t.toISOString()).lte("created_at",a.toISOString());return n||0}static async getDailyNewUsers(t,a){const{count:n}=await k.from("profiles").select("*",{count:"exact",head:!0}).gte("created_at",t.toISOString()).lte("created_at",a.toISOString());return n||0}static async getDailyActiveUsers(t,a){const{data:n}=await k.from("resume_analyses").select("user_id").gte("created_at",t.toISOString()).lte("created_at",a.toISOString());return new Set((n==null?void 0:n.map(r=>r.user_id))||[]).size}static calculateGrowth(t,a){return a===0?t>0?100:0:Math.round((t-a)/a*100)}static async getPackages(){const{data:t,error:a}=await k.from("packages").select("*").order("price");if(a)throw a;return t}static async createPackage(t){const{data:a,error:n}=await k.from("packages").insert(t).select().single();if(n)throw n;return a}static async updatePackage(t,a){const{data:n,error:i}=await k.from("packages").update(a).eq("id",t).select().single();if(i)throw i;return n}static async deletePackage(t){const{error:a}=await k.from("packages").delete().eq("id",t);if(a)throw a}static async getRecentSubscriptions(t=10){const{data:a,error:n}=await k.from("subscriptions").select(`
        *,
        profiles(first_name, last_name),
        package:packages(name)
      `).order("created_at",{ascending:!1}).limit(t);if(n)throw n;return a}static async getRecentTransactions(t=10){const{data:a,error:n}=await k.from("payment_transactions").select(`
        *,
        profiles(first_name, last_name)
      `).order("created_at",{ascending:!1}).limit(t);if(n)throw n;return a}static async getTopTemplates(t=5){const{data:a,error:n}=await k.from("resume_analyses").select(`
        template_id,
        resume_templates(name, category),
        count:template_id
      `).not("template_id","is",null).limit(t);if(n)throw n;const i=a==null?void 0:a.reduce((r,o)=>{const l=o.template_id;return r[l]||(r[l]={template:o.resume_templates,count:0}),r[l].count++,r},{});return Object.values(i||{}).sort((r,o)=>o.count-r.count).slice(0,t)}}const Ti=()=>{const[s,t]=u.useState([]),[a,n]=u.useState(!0),[i,r]=u.useState(!1),[o,l]=u.useState(null);u.useEffect(()=>{d()},[]);const d=async()=>{try{const x=await X.getPackages();t(x)}catch(x){console.error("Error loading packages:",x)}finally{n(!1)}},c=async x=>{try{await X.createPackage(x),await d(),r(!1)}catch(h){console.error("Error creating package:",h)}},m=async(x,h)=>{try{await X.updatePackage(x,h),await d(),l(null)}catch(v){console.error("Error updating package:",v)}},p=async x=>{if(confirm("Are you sure you want to delete this package?"))try{await X.deletePackage(x),await d()}catch(h){console.error("Error deleting package:",h)}};return a?e.jsx("div",{className:"animate-pulse",children:"Loading packages..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Subscription Packages"}),e.jsxs(M,{onClick:()=>r(!0),children:[e.jsx(mt,{className:"w-4 h-4 mr-2"}),"Create New Package"]})]}),i&&e.jsx(Jt,{onSubmit:c,onCancel:()=>r(!1)}),o&&e.jsx(Jt,{package:o,onSubmit:x=>m(o.id,x),onCancel:()=>l(null)}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(x=>e.jsx($,{hover:!0,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center space-x-2",children:[e.jsx("span",{children:x.name}),x.price>0&&e.jsx(pe,{className:"w-4 h-4 text-yellow-500"})]}),e.jsx("p",{className:"text-gray-600 mt-1",children:x.description})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:["$",x.price]}),e.jsx("div",{className:"text-sm text-gray-500",children:"per month"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Features:"}),e.jsx("ul",{className:"space-y-1",children:x.features.map((h,v)=>e.jsxs("li",{className:"text-sm text-gray-700 flex items-center space-x-2",children:[e.jsx(Pe,{className:"w-3 h-3 text-green-500 flex-shrink-0"}),e.jsx("span",{children:h})]},v))})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-600",children:"Template Access:"}),e.jsx("span",{className:"font-medium",children:x.template_access===-1?"All Templates":`${x.template_access} Templates`})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Monthly Analyses:"}),e.jsx("span",{className:"font-medium",children:x.analysis_limit===-1?"Unlimited":x.analysis_limit})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(M,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>l(x),children:[e.jsx(aa,{className:"w-4 h-4 mr-1"}),"Edit"]}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>p(x.id),children:e.jsx(sa,{className:"w-4 h-4"})})]})]})},x.id))})]})},Jt=({package:s,onSubmit:t,onCancel:a})=>{const[n,i]=u.useState({name:(s==null?void 0:s.name)||"",description:(s==null?void 0:s.description)||"",price:(s==null?void 0:s.price)||0,template_access:(s==null?void 0:s.template_access)||1,analysis_limit:(s==null?void 0:s.analysis_limit)||5,features:(s==null?void 0:s.features)||[""]}),r=c=>{c.preventDefault(),t({...n,features:n.features.filter(m=>m.trim())})},o=()=>{i(c=>({...c,features:[...c.features,""]}))},l=c=>{i(m=>({...m,features:m.features.filter((p,x)=>x!==c)}))},d=(c,m)=>{i(p=>({...p,features:p.features.map((x,h)=>h===c?m:x)}))};return e.jsxs($,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:s?"Edit Package":"Create New Package"}),e.jsxs("form",{onSubmit:r,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(J,{label:"Package Name",value:n.name,onChange:c=>i(m=>({...m,name:c.target.value})),required:!0}),e.jsx(J,{label:"Price (USD)",type:"number",step:"0.01",value:n.price,onChange:c=>i(m=>({...m,price:parseFloat(c.target.value)})),required:!0})]}),e.jsx(J,{label:"Description",value:n.description,onChange:c=>i(m=>({...m,description:c.target.value})),required:!0}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(J,{label:"Template Access (-1 for unlimited)",type:"number",value:n.template_access,onChange:c=>i(m=>({...m,template_access:parseInt(c.target.value)})),required:!0}),e.jsx(J,{label:"Analysis Limit (-1 for unlimited)",type:"number",value:n.analysis_limit,onChange:c=>i(m=>({...m,analysis_limit:parseInt(c.target.value)})),required:!0})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Package Features"}),e.jsxs(M,{type:"button",variant:"outline",size:"sm",onClick:o,children:[e.jsx(mt,{className:"w-4 h-4 mr-1"}),"Add Feature"]})]}),e.jsx("div",{className:"space-y-2",children:n.features.map((c,m)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",value:c,onChange:p=>d(m,p.target.value),placeholder:`Feature ${m+1}`,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})}),n.features.length>1&&e.jsx(M,{type:"button",variant:"ghost",size:"sm",onClick:()=>l(m),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(ie,{className:"w-4 h-4"})})]},m))}),n.features.length===0&&e.jsxs("div",{className:"text-center py-4 border-2 border-dashed border-gray-300 rounded-lg",children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"No features added yet"}),e.jsxs(M,{type:"button",variant:"outline",size:"sm",onClick:o,className:"mt-2",children:[e.jsx(mt,{className:"w-4 h-4 mr-1"}),"Add First Feature"]})]})]}),n.features.some(c=>c.trim())&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Feature Preview:"}),e.jsx("ul",{className:"space-y-1",children:n.features.filter(c=>c.trim()).map((c,m)=>e.jsxs("li",{className:"text-sm text-gray-600 flex items-center space-x-2",children:[e.jsx(Pe,{className:"w-3 h-3 text-green-500"}),e.jsx("span",{children:c})]},m))})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx(M,{type:"submit",className:"flex-1",children:s?"Update Package":"Create Package"}),e.jsx(M,{type:"button",variant:"outline",onClick:a,children:"Cancel"})]})]})]})},Ai=()=>{const[s,t]=u.useState([]),[a,n]=u.useState(!0),[i,r]=u.useState(!1),[o,l]=u.useState(1),[d,c]=u.useState(1),[m,p]=u.useState(0),[x,h]=u.useState(0),[v,f]=u.useState(!1),[g,P]=u.useState(null),[D,y]=u.useState(!1),[S,R]=u.useState({searchTerm:"",subscriptionStatus:"all",userRole:"all",sortBy:"created_at",sortOrder:"desc"}),[N,F]=u.useState(S);u.useEffect(()=>{O()},[o,S]);const O=async()=>{try{n(!0);const{users:b,pages:w,total:_,filteredCount:z}=await X.getUsers(o,10,S);t(b),c(w),p(_),h(z)}catch(b){console.error("Error loading users:",b)}finally{n(!1)}},C=b=>{R(w=>({...w,searchTerm:b})),l(1)},E=()=>{R(N),l(1),f(!1)},T=()=>{const b={searchTerm:"",subscriptionStatus:"all",userRole:"all",sortBy:"created_at",sortOrder:"desc"};R(b),F(b),l(1),f(!1)},U=async()=>{try{r(!0);const b=await X.exportUsers(S);if(b.length===0){alert("No data to export with current filters");return}const w=X.generateCSV(b),_=new Blob([w],{type:"text/csv;charset=utf-8;"}),z=document.createElement("a"),ee=URL.createObjectURL(_);z.setAttribute("href",ee),z.setAttribute("download",`users-export-${K(new Date,"yyyy-MM-dd-HHmm")}.csv`),z.style.visibility="hidden",document.body.appendChild(z),z.click(),document.body.removeChild(z),URL.revokeObjectURL(ee)}catch(b){console.error("Export failed:",b),alert("Export failed. Please try again.")}finally{r(!1)}},L=async b=>{try{const w=await X.getUserDetails(b.id);P(w),y(!0)}catch(w){console.error("Error fetching user details:",w),alert("Failed to load user details")}},I=async(b,w)=>{try{await X.updateUserStatus(b,w),await O(),alert("User role updated successfully")}catch(_){console.error("Error updating user role:",_),alert("Failed to update user role")}},B=(b,w)=>{const _="inline-flex px-2 py-1 text-xs font-semibold rounded-full";switch(b){case"active":return e.jsx("span",{className:`${_} bg-green-100 text-green-800`,children:w});case"cancelled":return e.jsx("span",{className:`${_} bg-red-100 text-red-800`,children:"Cancelled"});default:return e.jsx("span",{className:`${_} bg-gray-100 text-gray-800`,children:"Free"})}};return a&&s.length===0?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"User Management"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:x!==m?`Showing ${x} of ${m} users`:`${m} total users`})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto",children:[e.jsxs("div",{className:"relative flex-1 sm:flex-none",children:[e.jsx(Ha,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"search",placeholder:"Search users...",value:S.searchTerm,onChange:b=>C(b.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 w-full sm:w-64"})]}),e.jsxs(M,{variant:"outline",onClick:()=>f(!v),className:"flex items-center space-x-2",children:[e.jsx(Ga,{className:"w-4 h-4"}),e.jsx("span",{children:"Filters"}),(S.subscriptionStatus!=="all"||S.userRole!=="all"||S.dateRange)&&e.jsx("span",{className:"w-2 h-2 bg-blue-600 rounded-full"})]}),e.jsxs(M,{variant:"outline",onClick:U,isLoading:i,className:"flex items-center space-x-2",children:[e.jsx(vt,{className:"w-4 h-4"}),e.jsx("span",{children:"Export CSV"})]}),e.jsxs(M,{variant:"outline",onClick:O,isLoading:a,className:"flex items-center space-x-2",children:[e.jsx(ea,{className:"w-4 h-4"}),e.jsx("span",{children:"Refresh"})]})]})]}),v&&e.jsx($,{className:"border-blue-200 bg-blue-50",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Advanced Filters"}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>f(!1),children:e.jsx(ie,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subscription Status"}),e.jsxs("select",{value:N.subscriptionStatus,onChange:b=>F(w=>({...w,subscriptionStatus:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Statuses"}),e.jsx("option",{value:"active",children:"Active Subscription"}),e.jsx("option",{value:"inactive",children:"No Subscription"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"User Role"}),e.jsxs("select",{value:N.userRole,onChange:b=>F(w=>({...w,userRole:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Roles"}),e.jsx("option",{value:"user",children:"Regular Users"}),e.jsx("option",{value:"admin",children:"Administrators"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort By"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("select",{value:N.sortBy,onChange:b=>F(w=>({...w,sortBy:b.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"created_at",children:"Join Date"}),e.jsx("option",{value:"name",children:"Name"}),e.jsx("option",{value:"last_login",children:"Last Login"})]}),e.jsxs("select",{value:N.sortOrder,onChange:b=>F(w=>({...w,sortOrder:b.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"desc",children:"Newest"}),e.jsx("option",{value:"asc",children:"Oldest"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-blue-200",children:[e.jsx(M,{variant:"outline",onClick:T,children:"Reset Filters"}),e.jsx(M,{onClick:E,children:"Apply Filters"})]})]})}),e.jsxs($,{padding:"none",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subscription"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Activity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(b=>{var w,_;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center",children:e.jsxs("span",{className:"text-white font-medium text-sm",children:[(w=b.first_name)==null?void 0:w[0],(_=b.last_name)==null?void 0:_[0]]})})}),e.jsxs("div",{className:"ml-4",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900 flex items-center space-x-2",children:[e.jsxs("span",{children:[b.first_name," ",b.last_name]}),b.is_admin&&e.jsx(pe,{className:"w-4 h-4 text-yellow-500",title:"Administrator"})]}),e.jsx("div",{className:"text-sm text-gray-500",children:b.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center space-x-2",children:b.is_admin?e.jsxs(e.Fragment,{children:[e.jsx(Va,{className:"w-4 h-4 text-red-600"}),e.jsx("span",{className:"text-sm font-medium text-red-600",children:"Admin"})]}):e.jsxs(e.Fragment,{children:[e.jsx(yt,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:"User"})]})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:B(b.subscription_status,b.subscription_package)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{children:[e.jsxs("div",{children:[b.total_analyses," analyses"]}),e.jsxs("div",{className:"text-xs text-gray-400",children:["Last seen: ",K(new Date(b.last_login),"MMM dd")]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:K(new Date(b.created_at),"MMM dd, yyyy")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>L(b),children:e.jsx(ye,{className:"w-4 h-4"})}),e.jsxs("div",{className:"relative group",children:[e.jsx(M,{variant:"ghost",size:"sm",children:e.jsx(Ka,{className:"w-4 h-4"})}),e.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10",children:[e.jsxs("button",{onClick:()=>I(b.id,!b.is_admin),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center space-x-2",children:[e.jsx(aa,{className:"w-4 h-4"}),e.jsx("span",{children:b.is_admin?"Remove Admin":"Make Admin"})]}),e.jsxs("button",{onClick:()=>{confirm("Are you sure you want to delete this user? This action cannot be undone.")&&X.deleteUser(b.id).then(()=>{O(),alert("User deleted successfully")}).catch(()=>{alert("Failed to delete user")})},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center space-x-2",children:[e.jsx(sa,{className:"w-4 h-4"}),e.jsx("span",{children:"Delete User"})]})]})]})]})})]},b.id)})})]})}),e.jsxs("div",{className:"px-6 py-3 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Page ",o," of ",d," • ",x," users"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(M,{variant:"outline",size:"sm",onClick:()=>l(b=>Math.max(1,b-1)),disabled:o===1,children:e.jsx(Xa,{className:"w-4 h-4"})}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>l(b=>Math.min(d,b+1)),disabled:o===d,children:e.jsx(Ja,{className:"w-4 h-4"})})]})]})]}),D&&g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"User Details"}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>y(!1),children:e.jsx(ie,{className:"w-4 h-4"})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[g.first_name," ",g.last_name]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:g.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Role"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:g.is_admin?"Administrator":"User"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Joined"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:K(new Date(g.created_at),"MMM dd, yyyy")})]})]}),g.subscriptions&&g.subscriptions.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Subscription"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:g.subscriptions.map((b,w)=>{var _;return e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Package:"}),e.jsx("span",{className:"ml-2 font-medium",children:(_=b.package)==null?void 0:_.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsx("span",{className:"ml-2 font-medium capitalize",children:b.status})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Start Date:"}),e.jsx("span",{className:"ml-2",children:K(new Date(b.start_date),"MMM dd, yyyy")})]}),b.end_date&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"End Date:"}),e.jsx("span",{className:"ml-2",children:K(new Date(b.end_date),"MMM dd, yyyy")})]})]},w)})})]}),g.resume_analyses&&g.resume_analyses.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Recent Analyses"}),e.jsx("div",{className:"space-y-2",children:g.resume_analyses.slice(0,5).map((b,w)=>{var _;return e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:((_=b.resume_templates)==null?void 0:_.name)||"Unknown Template"}),e.jsx("p",{className:"text-xs text-gray-500",children:K(new Date(b.created_at),"MMM dd, yyyy HH:mm")})]}),b.ats_score&&e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-sm font-medium text-blue-600",children:[b.ats_score,"% ATS"]})})]},w)})})]})]})]})})]})},Oi=({revenueData:s,userActivityData:t})=>{const[a,n]=u.useState("revenue"),i=Math.max(...s.map(c=>c.revenue)),r=Math.max(...s.map(c=>c.subscriptions)),o=Math.max(...t.map(c=>c.newUsers)),l=Math.max(...t.map(c=>c.activeUsers)),d=Math.max(...t.map(c=>c.analyses));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Analytics Dashboard"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(M,{variant:a==="revenue"?"primary":"outline",onClick:()=>n("revenue"),size:"sm",children:[e.jsx(na,{className:"w-4 h-4 mr-2"}),"Revenue"]}),e.jsxs(M,{variant:a==="activity"?"primary":"outline",onClick:()=>n("activity"),size:"sm",children:[e.jsx(_e,{className:"w-4 h-4 mr-2"}),"User Activity"]})]})]}),a==="revenue"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs($,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Monthly Revenue"}),e.jsx(qe,{className:"w-5 h-5 text-blue-600"})]}),e.jsx("div",{className:"space-y-4",children:s.map((c,m)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:c.month}),e.jsxs("span",{className:"font-medium",children:["$",c.revenue.toLocaleString()]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-1000",style:{width:`${i>0?c.revenue/i*100:0}%`}})})]},m))})]}),e.jsxs($,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"New Subscriptions"}),e.jsx(Le,{className:"w-5 h-5 text-green-600"})]}),e.jsx("div",{className:"space-y-4",children:s.map((c,m)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:c.month}),e.jsx("span",{className:"font-medium",children:c.subscriptions})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-1000",style:{width:`${r>0?c.subscriptions/r*100:0}%`}})})]},m))})]})]}),a==="activity"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs($,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"New Users (30 days)"}),e.jsx(yt,{className:"w-5 h-5 text-blue-600"})]}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:t.slice(-10).map((c,m)=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:c.date}),e.jsx("span",{className:"font-medium",children:c.newUsers})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1",children:e.jsx("div",{className:"bg-blue-600 h-1 rounded-full transition-all duration-500",style:{width:`${o>0?c.newUsers/o*100:0}%`}})})]},m))})]}),e.jsxs($,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Active Users (30 days)"}),e.jsx(_e,{className:"w-5 h-5 text-green-600"})]}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:t.slice(-10).map((c,m)=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:c.date}),e.jsx("span",{className:"font-medium",children:c.activeUsers})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1",children:e.jsx("div",{className:"bg-green-600 h-1 rounded-full transition-all duration-500",style:{width:`${l>0?c.activeUsers/l*100:0}%`}})})]},m))})]}),e.jsxs($,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Daily Analyses (30 days)"}),e.jsx(qe,{className:"w-5 h-5 text-purple-600"})]}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:t.slice(-10).map((c,m)=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:c.date}),e.jsx("span",{className:"font-medium",children:c.analyses})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1",children:e.jsx("div",{className:"bg-purple-600 h-1 rounded-full transition-all duration-500",style:{width:`${d>0?c.analyses/d*100:0}%`}})})]},m))})]})]}),e.jsxs($,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"30-Day Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:t.reduce((c,m)=>c+m.newUsers,0)}),e.jsx("p",{className:"text-sm text-blue-800",children:"Total New Users"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:Math.round(t.reduce((c,m)=>c+m.activeUsers,0)/t.length)}),e.jsx("p",{className:"text-sm text-green-800",children:"Avg Daily Active"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:t.reduce((c,m)=>c+m.analyses,0)}),e.jsx("p",{className:"text-sm text-purple-800",children:"Total Analyses"})]}),e.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:Math.round(t.reduce((c,m)=>c+m.analyses,0)/t.length)}),e.jsx("p",{className:"text-sm text-orange-800",children:"Avg Daily Analyses"})]})]})]})]})]})},Fi=()=>{const[s,t]=u.useState("overview"),[a,n]=u.useState({totalUsers:0,activeSubscriptions:0,monthlyRevenue:0,totalAnalyses:0,userGrowth:0,subscriptionGrowth:0,revenueGrowth:0,analysisGrowth:0}),[i,r]=u.useState(null),[o,l]=u.useState([]),[d,c]=u.useState([]),[m,p]=u.useState([]),[x,h]=u.useState([]),[v,f]=u.useState(!0),[g,P]=u.useState(!1);u.useEffect(()=>{D()},[]);const D=async()=>{try{f(!0);const[N,F,O,C,E,T]=await Promise.all([X.getDashboardStats(),X.getUsageStats(),X.getRevenueChart(6),X.getUserActivity(30),X.getRecentSubscriptions(5),X.getTopTemplates(5)]);n(N),r(F),l(O),c(C),p(E),h(T)}catch(N){console.error("Error loading dashboard data:",N)}finally{f(!1)}},y=async()=>{P(!0),await D(),P(!1)},S=[{id:"overview",name:"Overview",icon:Le},{id:"analytics",name:"Analytics",icon:qe},{id:"packages",name:"Packages",icon:At},{id:"users",name:"Users",icon:Za}],R=[{name:"Total Users",value:a.totalUsers.toLocaleString(),icon:yt,change:`${a.userGrowth>0?"+":""}${a.userGrowth}%`,changeType:a.userGrowth>=0?"positive":"negative",description:"vs last month"},{name:"Active Subscriptions",value:a.activeSubscriptions.toLocaleString(),icon:Le,change:`${a.subscriptionGrowth>0?"+":""}${a.subscriptionGrowth}%`,changeType:a.subscriptionGrowth>=0?"positive":"negative",description:"vs last month"},{name:"Monthly Revenue",value:`$${a.monthlyRevenue.toLocaleString()}`,icon:na,change:`${a.revenueGrowth>0?"+":""}${a.revenueGrowth}%`,changeType:a.revenueGrowth>=0?"positive":"negative",description:"vs last month"},{name:"AI Analyses",value:a.totalAnalyses.toLocaleString(),icon:_e,change:`${a.analysisGrowth>0?"+":""}${a.analysisGrowth}%`,changeType:a.analysisGrowth>=0?"positive":"negative",description:"vs last month"}];return v?e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"animate-pulse space-y-8",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((N,F)=>e.jsx("div",{className:"h-32 bg-gray-200 rounded-lg"},F))})]})}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Admin Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Manage your platform, users, and subscription packages."})]}),e.jsxs(M,{onClick:y,variant:"outline",isLoading:g,className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"w-4 h-4"}),e.jsx("span",{children:"Refresh Data"})]})]}),e.jsx("div",{className:"mb-8",children:e.jsx("nav",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg w-fit",children:S.map(N=>{const F=N.icon;return e.jsxs("button",{onClick:()=>t(N.id),className:`
                  flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-all duration-200
                  ${s===N.id?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-200"}
                `,children:[e.jsx(F,{className:"w-4 h-4"}),e.jsx("span",{children:N.name})]},N.id)})})}),s==="overview"&&e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:R.map(N=>{const F=N.icon,O=N.changeType==="positive"?Le:Qa;return e.jsx($,{hover:!0,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:N.name}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:N.value}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(O,{className:`w-4 h-4 mr-1 ${N.changeType==="positive"?"text-green-600":"text-red-600"}`}),e.jsx("span",{className:`text-sm font-medium ${N.changeType==="positive"?"text-green-600":"text-red-600"}`,children:N.change}),e.jsx("span",{className:"text-sm text-gray-500 ml-1",children:N.description})]})]}),e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:e.jsx(F,{className:"w-6 h-6 text-blue-600"})})]})},N.name)})}),i&&e.jsxs($,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Platform Usage"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ta,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Resume Uploads"})]}),e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[i.resumeUploads.percentage,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-1000",style:{width:`${i.resumeUploads.percentage}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500",children:[i.resumeUploads.current," this month / ",i.resumeUploads.total," total"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"AI Analyses"})]}),e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[i.aiAnalyses.percentage,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-1000",style:{width:`${i.aiAnalyses.percentage}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500",children:[i.aiAnalyses.current," this month / ",i.aiAnalyses.total," total"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(At,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Template Usage"})]}),e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[i.templateUsage.percentage,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-1000",style:{width:`${i.templateUsage.percentage}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500",children:[i.templateUsage.current," this month / ",i.templateUsage.total," total"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(vt,{className:"w-4 h-4 text-orange-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"PDF Downloads"})]}),e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[i.pdfDownloads.percentage,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-orange-600 h-2 rounded-full transition-all duration-1000",style:{width:`${i.pdfDownloads.percentage}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500",children:[i.pdfDownloads.current," this month / ",i.pdfDownloads.total," total"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs($,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Subscriptions"}),e.jsx("div",{className:"space-y-3",children:m.map((N,F)=>{var O,C,E;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[(O=N.profiles)==null?void 0:O.first_name," ",(C=N.profiles)==null?void 0:C.last_name]}),e.jsx("p",{className:"text-sm text-gray-600",children:(E=N.package)==null?void 0:E.name})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-green-600 capitalize",children:N.status}),e.jsx("p",{className:"text-xs text-gray-500",children:K(new Date(N.created_at),"MMM dd, yyyy")})]})]},F)})})]}),e.jsxs($,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Templates"}),e.jsx("div",{className:"space-y-3",children:x.map((N,F)=>{var O,C;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:(O=N.template)==null?void 0:O.name}),e.jsx("p",{className:"text-sm text-gray-600 capitalize",children:(C=N.template)==null?void 0:C.category})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-blue-600",children:[N.count," uses"]}),e.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-1 mt-1",children:e.jsx("div",{className:"bg-blue-600 h-1 rounded-full",style:{width:`${Math.min(N.count/Math.max(...x.map(E=>E.count))*100,100)}%`}})})]})]},F)})})]})]})]}),s==="analytics"&&e.jsx("div",{className:"space-y-8",children:e.jsx(Oi,{revenueData:o,userActivityData:d})}),s==="packages"&&e.jsx(Ti,{}),s==="users"&&e.jsx(Ai,{})]})};class Qt{static async getPackages(){const{data:t,error:a}=await k.from("packages").select("*").eq("is_active",!0).order("price");if(a)throw a;return t}static async initializePayment(t){var i,r;const{data:{session:a},error:n}=await k.auth.getSession();if(n||!a)throw new Error("User not authenticated");try{const o=await fetch("https://qcaibguxsmwzihehhhar.supabase.co/functions/v1/initialize-payment",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a.access_token}`},body:JSON.stringify({packageId:t})});if(!o.ok){const d=await o.json().catch(()=>({}));throw new Error(d.error||`HTTP error! status: ${o.status}`)}const l=await o.json();if(!l.success)throw new Error(l.error||"Payment initialization failed");return l}catch(o){if(console.error("Payment initialization failed:",o),(i=o.message)!=null&&i.includes("fetch")||(r=o.message)!=null&&r.includes("404"))return console.warn("Edge Function not available, using fallback demo payment"),this.createDemoPaymentResponse(t);throw o}}static async verifyPayment(t){var i,r;const{data:{session:a},error:n}=await k.auth.getSession();if(n||!a)throw new Error("User not authenticated");try{const o=await fetch("https://qcaibguxsmwzihehhhar.supabase.co/functions/v1/verify-payment",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a.access_token}`},body:JSON.stringify({reference:t})});if(!o.ok){const d=await o.json().catch(()=>({}));throw new Error(d.error||`HTTP error! status: ${o.status}`)}const l=await o.json();if(!l.success)throw new Error(l.error||"Payment verification failed");return l}catch(o){if(console.error("Payment verification failed:",o),(i=o.message)!=null&&i.includes("fetch")||(r=o.message)!=null&&r.includes("404"))return console.warn("Edge Function not available, using fallback demo verification"),this.createDemoVerificationResponse(t);throw o}}static async createDemoPaymentResponse(t){const{data:{user:a}}=await k.auth.getUser();if(!a)throw new Error("User not authenticated");const{data:n}=await k.from("packages").select("*").eq("id",t).single();if(!n)throw new Error("Package not found");const{data:i}=await k.from("payment_transactions").insert({user_id:a.id,amount:n.price,currency:n.currency,status:"pending",paystack_reference:`demo_${Date.now()}`,metadata:{package_id:t}}).select().single();return{status:!0,message:"Demo payment initialized",data:{authorization_url:`${window.location.origin}/payment/demo?reference=${i==null?void 0:i.paystack_reference}&amount=${n.price*100}&email=${a.email}`,access_code:"demo_access_code",reference:i==null?void 0:i.paystack_reference}}}static async createDemoVerificationResponse(t){const{data:{user:a}}=await k.auth.getUser();if(!a)throw new Error("User not authenticated");const{data:n}=await k.from("payment_transactions").select("*").eq("paystack_reference",t).eq("user_id",a.id).single();if(!n)throw new Error("Transaction not found");await k.from("payment_transactions").update({status:"completed"}).eq("id",n.id);const i=n.metadata.package_id,r=new Date;return r.setDate(r.getDate()+30),await k.from("subscriptions").upsert({user_id:n.user_id,package_id:i,status:"active",start_date:new Date().toISOString(),end_date:r.toISOString(),auto_renew:!0}),{success:!0,data:{transaction:n,payment_data:{status:"success",reference:t}}}}static async cancelSubscription(t){const{data:{user:a}}=await k.auth.getUser();if(!a)throw new Error("User not authenticated");const{error:n}=await k.from("subscriptions").update({status:"cancelled",auto_renew:!1}).eq("id",t).eq("user_id",a.id);if(n)throw n}static async getUserSubscription(){const{data:{user:t}}=await k.auth.getUser();if(!t)return null;const{data:a,error:n}=await k.from("subscriptions").select(`
        *,
        package:packages(*)
      `).eq("user_id",t.id).eq("status","active").single();if(n&&n.code!=="PGRST116")throw n;return a}}const Mi=({isOpen:s,onClose:t,onSuccess:a})=>{const[n,i]=u.useState([]),[r,o]=u.useState(""),[l,d]=u.useState(!1),[c,m]=u.useState(!0),[p,x]=u.useState("");u.useEffect(()=>{s&&h()},[s]);const h=async()=>{try{x("");const f=await Qt.getPackages();i(f.filter(g=>g.price>0)),m(!1)}catch(f){console.error("Error loading packages:",f),x("Failed to load subscription packages"),m(!1)}},v=async()=>{var f;if(r){d(!0),x("");try{const g=await Qt.initializePayment(r);if((f=g.data)!=null&&f.authorization_url)window.location.href=g.data.authorization_url;else throw new Error("Payment initialization failed - no authorization URL received")}catch(g){console.error("Subscription failed:",g),x(g.message||"Subscription failed. Please try again."),d(!1)}}};return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Upgrade to Premium"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Unlock all features and get unlimited access"})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",disabled:l,children:e.jsx(ie,{className:"w-5 h-5 text-gray-500"})})]})}),e.jsxs("div",{className:"p-6",children:[p&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-red-700 text-sm",children:p})}),c?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(es,{className:"w-8 h-8 animate-spin text-blue-600"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:n.map(f=>e.jsx($,{className:`cursor-pointer transition-all duration-200 ${r===f.id?"ring-2 ring-blue-500 border-blue-500":"hover:border-gray-300"}`,onClick:()=>!l&&o(f.id),children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 flex items-center space-x-2",children:[e.jsx("span",{children:f.name}),e.jsx(pe,{className:"w-5 h-5 text-yellow-500"})]}),e.jsx("p",{className:"text-gray-600 mt-1",children:f.description})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:["$",f.price]}),e.jsx("div",{className:"text-sm text-gray-500",children:"per month"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Features included:"}),e.jsx("ul",{className:"space-y-2",children:f.features.map((g,P)=>e.jsxs("li",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(Pe,{className:"w-4 h-4 text-green-500 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700",children:g})]},P))})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Template Access:"}),e.jsx("span",{className:"font-medium",children:f.template_access===-1?"All Templates":`${f.template_access} Templates`})]}),e.jsxs("div",{className:"flex justify-between text-sm mt-1",children:[e.jsx("span",{className:"text-gray-600",children:"Monthly Analyses:"}),e.jsx("span",{className:"font-medium",children:f.analysis_limit===-1?"Unlimited":f.analysis_limit})]})]}),r===f.id&&e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Selected Plan"})]})})]})},f.id))}),e.jsxs("div",{className:"mt-8 text-center",children:[e.jsx(M,{onClick:v,disabled:!r||l,isLoading:l,size:"lg",className:"px-8",children:l?"Redirecting to Payment...":"Subscribe Now"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Secure payment powered by Paystack"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"You will be redirected to Paystack's secure checkout page"})]})]})]})]})}):null},Ui=()=>{const{user:s,profile:t,isLoading:a}=Ce(),[n,i]=u.useState(!0),[r,o]=u.useState(!1),l=!!s&&!!t;return u.useEffect(()=>{console.log("App state:",{user:!!s,profile:!!t,isAuthenticated:l,isLoading:a,userEmail:s==null?void 0:s.email,profileName:t?`${t.first_name} ${t.last_name}`:null})},[s,t,l,a]),a?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"text-gray-600 mt-4",children:"Loading..."})]})}):l?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(xs,{onUpgradeClick:()=>o(!0)}),e.jsx("main",{children:t!=null&&t.is_admin?e.jsx(Fi,{}):e.jsx(Nn,{})}),e.jsx(Mi,{isOpen:r,onClose:()=>o(!1),onSuccess:()=>window.location.reload()})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-md",children:n?e.jsx(fs,{onToggleForm:()=>i(!1)}):e.jsx(hs,{onToggleForm:()=>i(!0)})})})};function zi(){return e.jsx(us,{children:e.jsx(ms,{children:e.jsx(ps,{children:e.jsx(Ui,{})})})})}bt(document.getElementById("root")).render(e.jsx(u.StrictMode,{children:e.jsx(zi,{})}));export{He as _,e as j};
